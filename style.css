:root {
  /* Primitive Color Tokens */
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  /* RGB versions for opacity control */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;

  /* Background color tokens (Light Mode) */
  --color-bg-1: rgba(59, 130, 246, 0.08); /* Light blue */
  --color-bg-2: rgba(245, 158, 11, 0.08); /* Light yellow */
  --color-bg-3: rgba(34, 197, 94, 0.08); /* Light green */
  --color-bg-4: rgba(239, 68, 68, 0.08); /* Light red */
  --color-bg-5: rgba(147, 51, 234, 0.08); /* Light purple */
  --color-bg-6: rgba(249, 115, 22, 0.08); /* Light orange */
  --color-bg-7: rgba(236, 72, 153, 0.08); /* Light pink */
  --color-bg-8: rgba(6, 182, 212, 0.08); /* Light cyan */

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
  --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

  /* Common style patterns */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for opacity control */
  --color-success-rgb: 33, 128, 141;
  --color-error-rgb: 192, 21, 47;
  --color-warning-rgb: 168, 75, 47;
  --color-info-rgb: 98, 108, 113;

  /* POLISHING : Typographie professionnelle hiérarchique */
  --font-family-base: "Rajdhani", "Exo 2", "Orbitron", -apple-system,
    BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-family-tech: "Rajdhani", sans-serif; /* UI moderne tech */
  --font-family-pixel: "VT323", "Press Start 2P", monospace; /* Porygon & Glitch */
  --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
    Monaco, Consolas, monospace;
  --font-size-xs: 11px;
  --font-size-sm: 12px;
  --font-size-base: 14px;
  --font-size-md: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;
  --font-size-2xl: 20px;
  --font-size-3xl: 24px;
  --font-size-4xl: 30px;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 550;
  --font-weight-bold: 600;
  --line-height-tight: 1.2;
  --line-height-normal: 1.5;
  --letter-spacing-tight: -0.01em;

  /* Spacing */
  --space-0: 0;
  --space-1: 1px;
  --space-2: 2px;
  --space-4: 4px;
  --space-6: 6px;
  --space-8: 8px;
  --space-10: 10px;
  --space-12: 12px;
  --space-16: 16px;
  --space-20: 20px;
  --space-24: 24px;
  --space-32: 32px;

  /* Border Radius */
  --radius-sm: 6px;
  --radius-base: 8px;
  --radius-md: 10px;
  --radius-lg: 12px;
  --radius-full: 9999px;

  /* Shadows */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
    0 2px 4px -1px rgba(0, 0, 0, 0.02);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
    0 4px 6px -2px rgba(0, 0, 0, 0.02);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
    inset 0 -1px 0 rgba(0, 0, 0, 0.03);

  /* Animation */
  --duration-fast: 150ms;
  --duration-normal: 250ms;
  --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

  /* Layout */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
}

/* Dark mode colors */
@media (prefers-color-scheme: dark) {
  :root {
    /* RGB versions for opacity control (Dark Mode) */
    --color-gray-400-rgb: 119, 124, 124;
    --color-teal-300-rgb: 50, 184, 198;
    --color-gray-300-rgb: 167, 169, 169;
    --color-gray-200-rgb: 245, 245, 245;

    /* Background color tokens (Dark Mode) */
    --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
    --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
    --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
    --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
    --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
    --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
    --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
    --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

    /* Semantic Color Tokens (Dark Mode) */
    --color-background: var(--color-charcoal-700);
    --color-surface: var(--color-charcoal-800);
    --color-text: var(--color-gray-200);
    --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
    --color-primary: var(--color-teal-300);
    --color-primary-hover: var(--color-teal-400);
    --color-primary-active: var(--color-teal-800);
    --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
    --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
    --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
    --color-border: rgba(var(--color-gray-400-rgb), 0.3);
    --color-error: var(--color-red-400);
    --color-success: var(--color-teal-300);
    --color-warning: var(--color-orange-400);
    --color-info: var(--color-gray-300);
    --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
    --color-btn-primary-text: var(--color-slate-900);
    --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
    --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
    --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(0, 0, 0, 0.15);
    --button-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
    --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

    /* Common style patterns - updated for dark mode */
    --focus-ring: 0 0 0 3px var(--color-focus-ring);
    --focus-outline: 2px solid var(--color-primary);
    --status-bg-opacity: 0.15;
    --status-border-opacity: 0.25;
    --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

    /* RGB versions for dark mode */
    --color-success-rgb: var(--color-teal-300-rgb);
    --color-error-rgb: var(--color-red-400-rgb);
    --color-warning-rgb: var(--color-orange-400-rgb);
    --color-info-rgb: var(--color-gray-300-rgb);
  }
}

/* Data attribute for manual theme switching */
[data-color-scheme="dark"] {
  /* RGB versions for opacity control (dark mode) */
  --color-gray-400-rgb: 119, 124, 124;
  --color-teal-300-rgb: 50, 184, 198;
  --color-gray-300-rgb: 167, 169, 169;
  --color-gray-200-rgb: 245, 245, 245;

  /* Colorful background palette - Dark Mode */
  --color-bg-1: rgba(29, 78, 216, 0.15); /* Dark blue */
  --color-bg-2: rgba(180, 83, 9, 0.15); /* Dark yellow */
  --color-bg-3: rgba(21, 128, 61, 0.15); /* Dark green */
  --color-bg-4: rgba(185, 28, 28, 0.15); /* Dark red */
  --color-bg-5: rgba(107, 33, 168, 0.15); /* Dark purple */
  --color-bg-6: rgba(194, 65, 12, 0.15); /* Dark orange */
  --color-bg-7: rgba(190, 24, 93, 0.15); /* Dark pink */
  --color-bg-8: rgba(8, 145, 178, 0.15); /* Dark cyan */

  /* Semantic Color Tokens (Dark Mode) */
  --color-background: var(--color-charcoal-700);
  --color-surface: var(--color-charcoal-800);
  --color-text: var(--color-gray-200);
  --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
  --color-primary: var(--color-teal-300);
  --color-primary-hover: var(--color-teal-400);
  --color-primary-active: var(--color-teal-800);
  --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
  --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
  --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
  --color-border: rgba(var(--color-gray-400-rgb), 0.3);
  --color-error: var(--color-red-400);
  --color-success: var(--color-teal-300);
  --color-warning: var(--color-orange-400);
  --color-info: var(--color-gray-300);
  --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
  --color-btn-primary-text: var(--color-slate-900);
  --color-card-border: rgba(var(--color-gray-400-rgb), 0.15);
  --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
  --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1),
    inset 0 -1px 0 rgba(0, 0, 0, 0.15);
  --color-border-secondary: rgba(var(--color-gray-400-rgb), 0.2);
  --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);

  /* Common style patterns - updated for dark mode */
  --focus-ring: 0 0 0 3px var(--color-focus-ring);
  --focus-outline: 2px solid var(--color-primary);
  --status-bg-opacity: 0.15;
  --status-border-opacity: 0.25;
  --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

  /* RGB versions for dark mode */
  --color-success-rgb: var(--color-teal-300-rgb);
  --color-error-rgb: var(--color-red-400-rgb);
  --color-warning-rgb: var(--color-orange-400-rgb);
  --color-info-rgb: var(--color-gray-300-rgb);
}

[data-color-scheme="light"] {
  /* RGB versions for opacity control (light mode) */
  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;

  /* Semantic Color Tokens (Light Mode) */
  --color-background: var(--color-cream-50);
  --color-surface: var(--color-cream-100);
  --color-text: var(--color-slate-900);
  --color-text-secondary: var(--color-slate-500);
  --color-primary: var(--color-teal-500);
  --color-primary-hover: var(--color-teal-600);
  --color-primary-active: var(--color-teal-700);
  --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
  --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
  --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
  --color-border: rgba(var(--color-brown-600-rgb), 0.2);
  --color-btn-primary-text: var(--color-cream-50);
  --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
  --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
  --color-error: var(--color-red-500);
  --color-success: var(--color-teal-500);
  --color-warning: var(--color-orange-500);
  --color-info: var(--color-slate-500);
  --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

  /* RGB versions for light mode */
  --color-success-rgb: var(--color-teal-500-rgb);
  --color-error-rgb: var(--color-red-500-rgb);
  --color-warning-rgb: var(--color-orange-500-rgb);
  --color-info-rgb: var(--color-slate-500-rgb);
}

/* Base styles */
html {
  font-size: var(--font-size-base);
  font-family: var(--font-family-base);
  line-height: var(--line-height-normal);
  color: var(--color-text);
  background-color: var(--color-background);
  -webkit-font-smoothing: antialiased;
  box-sizing: border-box;
}

body {
    margin: 0;
    padding: 0;
    padding-bottom: 80px;
    /* POLISHING : Police tech moderne par défaut */
    font-family: var(--font-family-tech);
    font-weight: 500;
    /* POLISHING : Éviter les problèmes de scroll mobile */
    overflow-x: hidden;
    max-width: 100vw;
    position: relative;
}

*,
*::before,
*::after {
  box-sizing: inherit;
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text);
  letter-spacing: var(--letter-spacing-tight);
}

h1 {
  font-size: var(--font-size-4xl);
}
h2 {
  font-size: var(--font-size-3xl);
}
h3 {
  font-size: var(--font-size-2xl);
}
h4 {
  font-size: var(--font-size-xl);
}
h5 {
  font-size: var(--font-size-lg);
}
h6 {
  font-size: var(--font-size-md);
}

p {
  margin: 0 0 var(--space-16) 0;
}

a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color var(--duration-fast) var(--ease-standard);
}

a:hover {
  color: var(--color-primary-hover);
}

code,
pre {
  font-family: var(--font-family-mono);
  font-size: calc(var(--font-size-base) * 0.95);
  background-color: var(--color-secondary);
  border-radius: var(--radius-sm);
}

code {
  padding: var(--space-1) var(--space-4);
}

pre {
  padding: var(--space-16);
  margin: var(--space-16) 0;
  overflow: auto;
  border: 1px solid var(--color-border);
}

pre code {
  background: none;
  padding: 0;
}

/* POLISHING : Boutons avec effet de profondeur tactile */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-8) var(--space-16);
  border-radius: var(--radius-base);
  font-size: var(--font-size-base);
  font-weight: 500;
  line-height: 1.5;
  cursor: pointer;
  transition: all var(--duration-normal) var(--ease-standard);
  border: none;
  text-decoration: none;
  position: relative;
  /* Effet de profondeur */
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);
  border-bottom: 3px solid rgba(0, 0, 0, 0.2);
  font-family: var(--font-family-tech);
}

.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary {
  background: var(--color-primary);
  color: var(--color-btn-primary-text);
}

.btn--primary:hover {
  background: var(--color-primary-hover);
}

.btn--primary:active {
  background: var(--color-primary-active);
  /* POLISHING : Effet d'écrasement tactile */
  transform: translateY(2px);
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
  border-bottom-width: 1px;
}

.btn--secondary {
  background: var(--color-secondary);
  color: var(--color-text);
}

.btn--secondary:hover {
  background: var(--color-secondary-hover);
}

.btn--secondary:active {
  background: var(--color-secondary-active);
  /* POLISHING : Effet d'écrasement tactile */
  transform: translateY(2px);
  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
  border-bottom-width: 1px;
}

.btn--outline {
  background: transparent;
  border: 1px solid var(--color-border);
  color: var(--color-text);
}

.btn--outline:hover {
  background: var(--color-secondary);
}

.btn--sm {
  padding: var(--space-4) var(--space-12);
  font-size: var(--font-size-sm);
  border-radius: var(--radius-sm);
}

.btn--lg {
  padding: var(--space-10) var(--space-20);
  font-size: var(--font-size-lg);
  border-radius: var(--radius-md);
}

.btn--full-width {
  width: 100%;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Form elements */
.form-control {
  display: block;
  width: 100%;
  padding: var(--space-8) var(--space-12);
  font-size: var(--font-size-md);
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-base);
  transition: border-color var(--duration-fast) var(--ease-standard),
    box-shadow var(--duration-fast) var(--ease-standard);
}

textarea.form-control {
  font-family: var(--font-family-base);
  font-size: var(--font-size-base);
}

select.form-control {
  padding: var(--space-8) var(--space-12);
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: var(--select-caret-light);
  background-repeat: no-repeat;
  background-position: right var(--space-12) center;
  background-size: 16px;
  padding-right: var(--space-32);
}

/* Add a dark mode specific caret */
@media (prefers-color-scheme: dark) {
  select.form-control {
    background-image: var(--select-caret-dark);
  }
}

/* Also handle data-color-scheme */
[data-color-scheme="dark"] select.form-control {
  background-image: var(--select-caret-dark);
}

[data-color-scheme="light"] select.form-control {
  background-image: var(--select-caret-light);
}

.form-control:focus {
  border-color: var(--color-primary);
  outline: var(--focus-outline);
}

.form-label {
  display: block;
  margin-bottom: var(--space-8);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.form-group {
  margin-bottom: var(--space-16);
}

/* Card component */
.card {
  background-color: var(--color-surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-card-border);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  transition: box-shadow var(--duration-normal) var(--ease-standard);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

.card__body {
  padding: var(--space-16);
}

.card__header,
.card__footer {
  padding: var(--space-16);
  border-bottom: 1px solid var(--color-card-border-inner);
}

/* Status indicators - simplified with CSS variables */
.status {
  display: inline-flex;
  align-items: center;
  padding: var(--space-6) var(--space-12);
  border-radius: var(--radius-full);
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-sm);
}

.status--success {
  background-color: rgba(
    var(--color-success-rgb, 33, 128, 141),
    var(--status-bg-opacity)
  );
  color: var(--color-success);
  border: 1px solid
    rgba(var(--color-success-rgb, 33, 128, 141), var(--status-border-opacity));
}

.status--error {
  background-color: rgba(
    var(--color-error-rgb, 192, 21, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-error);
  border: 1px solid
    rgba(var(--color-error-rgb, 192, 21, 47), var(--status-border-opacity));
}

.status--warning {
  background-color: rgba(
    var(--color-warning-rgb, 168, 75, 47),
    var(--status-bg-opacity)
  );
  color: var(--color-warning);
  border: 1px solid
    rgba(var(--color-warning-rgb, 168, 75, 47), var(--status-border-opacity));
}

.status--info {
  background-color: rgba(
    var(--color-info-rgb, 98, 108, 113),
    var(--status-bg-opacity)
  );
  color: var(--color-info);
  border: 1px solid
    rgba(var(--color-info-rgb, 98, 108, 113), var(--status-border-opacity));
}

/* Container layout */
.container {
  width: 100%;
  margin-right: auto;
  margin-left: auto;
  padding-right: var(--space-16);
  padding-left: var(--space-16);
}

@media (min-width: 640px) {
  .container {
    max-width: var(--container-sm);
  }
}
@media (min-width: 768px) {
  .container {
    max-width: var(--container-md);
  }
}
@media (min-width: 1024px) {
  .container {
    max-width: var(--container-lg);
  }
}
@media (min-width: 1280px) {
  .container {
    max-width: var(--container-xl);
  }
}

/* Utility classes */
.flex {
  display: flex;
}
.flex-col {
  flex-direction: column;
}
.items-center {
  align-items: center;
}
.justify-center {
  justify-content: center;
}
.justify-between {
  justify-content: space-between;
}
.gap-4 {
  gap: var(--space-4);
}
.gap-8 {
  gap: var(--space-8);
}
.gap-16 {
  gap: var(--space-16);
}

.m-0 {
  margin: 0;
}
.mt-8 {
  margin-top: var(--space-8);
}
.mb-8 {
  margin-bottom: var(--space-8);
}
.mx-8 {
  margin-left: var(--space-8);
  margin-right: var(--space-8);
}
.my-8 {
  margin-top: var(--space-8);
  margin-bottom: var(--space-8);
}

.p-0 {
  padding: 0;
}
.py-8 {
  padding-top: var(--space-8);
  padding-bottom: var(--space-8);
}
.px-8 {
  padding-left: var(--space-8);
  padding-right: var(--space-8);
}
.py-16 {
  padding-top: var(--space-16);
  padding-bottom: var(--space-16);
}
.px-16 {
  padding-left: var(--space-16);
  padding-right: var(--space-16);
}

.block {
  display: block;
}
.hidden {
  display: none;
}

/* Accessibility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

:focus-visible {
  outline: var(--focus-outline);
  outline-offset: 2px;
}

/* Dark mode specifics */
[data-color-scheme="dark"] .btn--outline {
  border: 1px solid var(--color-border-secondary);
}

@font-face {
  font-family: 'FKGroteskNeue';
  src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2')
    format('woff2');
}

/* END PERPLEXITY DESIGN SYSTEM */
/* Pokemon Collector Game - External CSS */
body { margin: 0; padding: 0; }
:root {
    --dark-bg: #2C2F33;
    --dark-surface: #23272A;
    --dark-elevated: #2C2F33;
    --dark-border: rgba(255, 255, 255, 0.1);
    --text-primary: #FFFFFF;
    --text-secondary: #B9BBBE;
    --text-muted: #72767D;
    
    --pokemon-red: #EE1515;
    --pokemon-blue: #3B4CCA;
    --pokemon-yellow: #FFD700;
    
    --common-color: #9E9E9E;
    --uncommon-color: #4CAF50;
    --rare-color: #2196F3;
    --super-rare-color: #9C27B0;
    --legendary-color: #FF9800;
    
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    --radius: 8px;
    --radius-lg: 12px;
    --shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    --transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-family);
    background: var(--dark-bg);
    color: var(--text-primary);
    min-height: 100vh;
    padding-bottom: 70px;
    margin: 0;
    padding-top: 0;
    /* Forcer aucun espace en haut */
    margin-top: 0 !important;
    padding-top: 0 !important;
}

html {
    margin: 0;
    padding: 0;
}

/* Top Bar */
.top-bar {
    background: var(--dark-elevated);
    padding: calc(12px + env(safe-area-inset-top, 0px)) 16px 12px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--dark-border);
    position: sticky;
    top: 0;
    left: 0;
    right: 0;
    margin: 0;
    margin-top: 0 !important;
    min-height: 60px;
    z-index: 100;
    /* Forcer le header à coller complètement au haut - aucun espace visible */
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.top-bar-right {
    display: flex;
    gap: 12px;
    align-items: center;
}

.app-title {
    font-size: 18px;
    font-weight: 700;
    color: var(--pokemon-yellow);
}

.streak-container {
    position: relative;
}

.coin-display, .streak-display {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 14px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 14px;
    border: 1px solid;
}

.coin-display {
    background: rgba(255, 215, 0, 0.15);
    border-color: rgba(255, 215, 0, 0.3);
    color: var(--pokemon-yellow);
}

.streak-display {
    background: rgba(255, 69, 0, 0.15);
    border-color: rgba(255, 69, 0, 0.3);
    color: #FF4500;
    cursor: pointer;
    position: relative;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

/* V12: Streak tooltip with mobile tap support */
.streak-tooltip-popup {
    position: fixed;
    top: 70px;
    right: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 15px;
    padding: 20px;
    min-width: 280px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    z-index: 9999;
    animation: slideInTooltip 0.3s ease-out;
    color: white;
}

@keyframes slideInTooltip {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.tooltip-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9998;
    background: transparent;
}

.tooltip-content h3 {
    margin: 0 0 10px 0;
    color: #FFD700;
    font-size: 18px;
}

.tooltip-benefits {
    margin: 15px 0;
}

.benefit-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px;
    background: rgba(255,255,255,0.1);
    border-radius: 8px;
    margin-bottom: 8px;
    color: white;
}

.benefit-icon {
    font-size: 18px;
}

.tooltip-warning {
    margin-top: 15px;
    padding: 10px;
    background: rgba(255,107,107,0.2);
    border-radius: 8px;
    font-size: 0.9em;
    color: #ffb3b3;
}

.streak-tooltip-old {
    display: none;
    position: absolute;
    top: calc(100% + 10px);
    right: 0;
    background: #2C2F33;
    border: 2px solid #FFD700;
    border-radius: var(--radius-lg);
    padding: 16px;
    width: 280px;
    z-index: 9999;
    box-shadow: 0 8px 24px rgba(0,0,0,0.5);
    font-size: 13px;
    line-height: 1.5;
    pointer-events: auto;
    touch-action: auto;
    cursor: auto;
    color: var(--text-primary);
}

.streak-tooltip-popup.show {
    display: block;
}

.streak-tooltip-old.show {
    display: block !important;
    animation: tooltipFade 0.2s ease;
}

.streak-tooltip::before {
    content: '';
    position: absolute;
    top: -8px;
    right: 20px;
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-bottom: 8px solid #FFD700;
}

/* Home Header Styling */
/* HOME HEADER - COMPLETE FIXED LAYOUT */
.home-header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(118, 75, 162, 0.3));
    border-radius: 16px;
    padding: 24px;
    margin-bottom: 24px;
    gap: 20px;
    flex-wrap: wrap;
}

.trainer-display {
    display: flex;
    align-items: center;
    gap: 16px;
    flex: 1;
    min-width: 250px;
}

.trainer-avatar-circle {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    flex-shrink: 0;
}

.trainer-details {
    display: flex;
    flex-direction: column;
    gap: 6px;
    flex: 1;
}

.trainer-level-text {
    color: white;
    font-size: 18px;
    font-weight: bold;
    line-height: 1;
}

.xp-display-text {
    color: rgba(255, 255, 255, 0.8);
    font-size: 14px;
    line-height: 1;
    margin-bottom: 4px;
}

.xp-bar-container {
    width: 100%;
    max-width: 220px;
    height: 12px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 12px;
    overflow: hidden;
}

.xp-bar-inner {
    height: 100%;
    background: linear-gradient(90deg, #4CAF50, #8BC34A);
    border-radius: 12px;
    transition: width 0.5s ease;
}

.resources-display {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

.resource-box {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(0, 0, 0, 0.25);
    padding: 10px 16px;
    border-radius: 24px;
    cursor: pointer;
    transition: all 0.3s;
    white-space: nowrap;
}

.resource-box:hover {
    background: rgba(0, 0, 0, 0.35);
    transform: translateY(-2px);
}

.resource-emoji {
    font-size: 20px;
}

.resource-label-text {
    color: rgba(255, 255, 255, 0.8);
    font-size: 14px;
}

.resource-number {
    color: white;
    font-weight: bold;
    font-size: 16px;
}

/* OLD HOME HEADER - KEEP FOR BACKWARDS COMPATIBILITY */
.home-header-new {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 30px;
}

.trainer-section-new {
    display: flex;
    align-items: center;
    gap: 15px;
}

.trainer-avatar-new {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
    flex-shrink: 0;
}

.trainer-info-new {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.trainer-level-new {
    font-size: 1.1em;
    font-weight: bold;
    color: white;
}

.trainer-xp-container-new {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.xp-text-new {
    font-size: 0.85em;
    color: rgba(255, 255, 255, 0.8);
}

.xp-bar-wrapper-new {
    width: 200px;
    height: 10px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    overflow: hidden;
}

.xp-bar-fill-new {
    height: 100%;
    background: linear-gradient(90deg, #4CAF50, #8BC34A);
    transition: width 0.5s ease;
    border-radius: 10px;
}

.resources-section-new {
    display: flex;
    gap: 15px;
}

.resource-item-new {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(0, 0, 0, 0.2);
    padding: 10px 15px;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s;
}

.resource-item-new:hover {
    background: rgba(0, 0, 0, 0.3);
    transform: scale(1.05);
}

.resource-icon-new {
    font-size: 1.2em;
}

.resource-label-new {
    font-size: 0.9em;
    color: rgba(255, 255, 255, 0.8);
}

.resource-value-new {
    font-weight: bold;
    color: white;
    font-size: 1.1em;
}

.home-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
    border-radius: 15px;
    margin-bottom: 20px;
    gap: 15px;
}

.trainer-section {
    display: flex;
    align-items: center;
    gap: 15px;
    flex: 1;
}

.trainer-avatar {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
    flex-shrink: 0;
}

.trainer-xp {
    flex: 1;
    min-width: 0;
}

.level-badge {
    background: linear-gradient(135deg, #FFD700, #FFA500);
    color: #000;
    padding: 5px 15px;
    border-radius: 20px;
    font-weight: bold;
    margin-bottom: 8px;
    display: inline-block;
    font-size: 14px;
}

.xp-bar-container {
    width: 100%;
    max-width: 200px;
    height: 10px;
    background: rgba(0,0,0,0.3);
    border-radius: 10px;
    overflow: hidden;
    margin-bottom: 5px;
}

.xp-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #4CAF50, #8BC34A);
    transition: width 0.5s ease;
}

.xp-text {
    font-size: 0.7em;
    color: rgba(255,255,255,0.8);
}

.resources {
    display: flex;
    gap: 10px;
    flex-shrink: 0;
}

.resource-item {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: rgba(0,0,0,0.2);
    border-radius: 20px;
    font-weight: 600;
    font-size: 14px;
}

.streak-display-home {
    cursor: pointer;
    transition: background 0.3s;
}

.streak-display-home:hover {
    background: rgba(255,255,255,0.1);
}

.home-stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin-bottom: 20px;
}

.stat-card {
    background: var(--dark-surface);
    border: 2px solid var(--dark-border);
    border-radius: 12px;
    padding: 16px;
    text-align: center;
    transition: transform 0.3s, box-shadow 0.3s;
}

.stat-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.stat-icon {
    font-size: 2em;
    margin-bottom: 8px;
}

.stat-card .stat-value {
    font-size: 1.5em;
    font-weight: bold;
    color: var(--pokemon-yellow);
    margin-bottom: 4px;
}

.stat-card .stat-label {
    font-size: 0.9em;
    color: var(--text-secondary);
}

/* V12: Mobile-specific tooltip positioning with tap support */
/* STREAK TOOLTIP MODAL - PROPER POPUP */
.streak-tooltip-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 99999;
    animation: fadeIn 0.2s ease;
}

.streak-tooltip-content {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    padding: 30px;
    max-width: 400px;
    width: 90%;
    position: relative;
    animation: slideUp 0.3s ease;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

@keyframes slideUp {
    from { transform: translateY(30px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.tooltip-close {
    position: absolute;
    top: 10px;
    right: 10px;
    background: rgba(255, 255, 255, 0.2);
    border: none;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    color: white;
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
}

.tooltip-close:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(90deg);
}

.streak-tooltip-content h3 {
    margin: 0 0 5px 0;
    color: #FFD700;
    font-size: 1.5em;
}

.tooltip-subtitle {
    color: rgba(255, 255, 255, 0.9);
    margin: 0 0 20px 0;
    font-size: 0.9em;
}

.tooltip-benefits {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 20px;
}

.benefit-row {
    display: flex;
    align-items: center;
    gap: 12px;
    background: rgba(255, 255, 255, 0.15);
    padding: 12px;
    border-radius: 10px;
}

.benefit-icon {
    font-size: 1.5em;
}

.benefit-text {
    color: white;
    font-size: 0.95em;
}

.tooltip-warning {
    background: rgba(255, 107, 107, 0.3);
    padding: 12px;
    border-radius: 10px;
    text-align: center;
    color: white;
    font-size: 0.9em;
}

/* INVENTORY NEW STYLES */
.section-title-new {
    font-size: 2em;
    color: white;
    margin-bottom: 20px;
}

.toggle-container-new {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 30px;
    cursor: pointer;
}

.toggle-container-new input[type="checkbox"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
}

.toggle-label-text-new {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1em;
}

/* INVENTORY - COMPLETE FIXED STYLES */
.page-title {
    color: white;
    font-size: 32px;
    margin-bottom: 24px;
    font-weight: bold;
}

.toggle-checkbox-container {
    margin-bottom: 32px;
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
}

.checkbox-label input[type="checkbox"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
}

.checkbox-text {
    color: rgba(255, 255, 255, 0.9);
    font-size: 16px;
}

.section-subtitle {
    color: white;
    font-size: 24px;
    margin: 32px 0 16px 0;
    font-weight: bold;
}

.inventory-cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 20px;
    margin-bottom: 24px;
}

.inventory-card-item {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.25), rgba(118, 75, 162, 0.25));
    border: 2px solid rgba(255, 255, 255, 0.15);
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    transition: all 0.3s;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.inventory-card-item:hover {
    transform: translateY(-6px);
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.4);
}

.inventory-card-item.not-owned-item {
    opacity: 0.4;
    filter: grayscale(70%);
}

.card-emoji-large {
    font-size: 48px;
    margin-bottom: 8px;
}

.card-title-text {
    color: white;
    font-weight: bold;
    font-size: 18px;
}

.card-quantity-text {
    color: #FFD700;
    font-size: 24px;
    font-weight: bold;
}

.card-description-text {
    color: rgba(255, 255, 255, 0.7);
    font-size: 14px;
    margin-bottom: 8px;
}

.btn-open-item {
    width: 100%;
    padding: 12px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    border-radius: 12px;
    font-weight: bold;
    font-size: 15px;
    cursor: pointer;
    transition: all 0.3s;
}

.btn-open-item:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
}

/* OLD INVENTORY STYLES */
.inventory-section-title-new {
    color: white;
    font-size: 1.5em;
    margin: 30px 0 15px 0;
}

.inventory-grid-new {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.inventory-card-new {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    transition: all 0.3s;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.inventory-card-new:hover {
    transform: translateY(-5px);
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.inventory-card-new.not-owned {
    opacity: 0.4;
    filter: grayscale(70%);
}

.inventory-icon-new {
    font-size: 3em;
}

.inventory-name-new {
    color: white;
    font-weight: bold;
    font-size: 1.1em;
}

.inventory-quantity-new {
    color: #FFD700;
    font-size: 1.5em;
    font-weight: bold;
}

.inventory-description-new {
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.85em;
}

.btn-open-box-new {
    width: 100%;
    padding: 10px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
}

.btn-open-box-new:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.5);
}

/* QUESTS - COMPLETE FIXED STYLES */
.quests-tabs-container {
    display: flex;
    gap: 12px;
    margin-bottom: 32px;
}

.quest-tab-button {
	flex: 1;
	padding: 14px 20px;
	background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15));
	border: 2px solid rgba(255, 255, 255, 0.15);
	border-radius: 12px;
	color: white;
	font-size: 16px;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.3s ease;
}

.quest-tab-button:hover {
	background: linear-gradient(135deg, rgba(102, 126, 234, 0.25), rgba(118, 75, 162, 0.25));
	border-color: rgba(255, 255, 255, 0.3);
	transform: translateY(-2px);
}

.quest-tab-button.active {
	background: linear-gradient(135deg, #667eea, #764ba2);
	border-color: #667eea;
	box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}
.capture-tabs {
	display: flex;
	gap: 12px;
	margin-bottom: 24px;
}

.capture-tab-button {
	flex: 1;
	padding: 14px 20px;
	background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15));
	border: 2px solid rgba(255, 255, 255, 0.15);
	border-radius: 12px;
	color: white;
	font-size: 16px;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.3s ease;
}

.capture-tab-button:hover {
	background: linear-gradient(135deg, rgba(102, 126, 234, 0.25), rgba(118, 75, 162, 0.25));
	border-color: rgba(255, 255, 255, 0.3);
	transform: translateY(-2px);
}

.capture-tab-button.active {
	background: linear-gradient(135deg, #667eea, #764ba2);
	border-color: #667eea;
	box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}



.quest-tab-panel {
    display: none;
}

.quest-tab-panel.active {
    display: block;
}

.quest-card-container {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.25), rgba(118, 75, 162, 0.25));
    border: 2px solid rgba(255, 255, 255, 0.15);
    border-radius: 16px;
    padding: 24px;
    margin-bottom: 16px;
    transition: all 0.3s;
}

.quest-card-container:hover {
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateX(6px);
}

.quest-card-container.completed-quest {
    border-color: #4CAF50;
    background: linear-gradient(135deg, rgba(76, 175, 80, 0.25), rgba(56, 142, 60, 0.25));
}

.quest-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.quest-card-title {
    color: white;
    font-size: 20px;
    font-weight: bold;
    margin: 0;
}

.quest-progress-numbers {
    color: rgba(255, 255, 255, 0.8);
    font-weight: bold;
    font-size: 16px;
}

.quest-description-text {
    color: rgba(255, 255, 255, 0.75);
    font-size: 15px;
    margin: 12px 0;
}

.quest-progress-bar-wrapper {
    height: 14px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 14px;
    overflow: hidden;
    margin: 16px 0;
}

.quest-progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #667eea, #764ba2);
    border-radius: 14px;
    transition: width 0.6s ease;
}

.quest-card-container.completed-quest .quest-progress-bar-fill {
    background: linear-gradient(90deg, #4CAF50, #8BC34A);
}

.quest-card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 16px;
}

.quest-rewards-list {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.quest-reward-badge {
    background: rgba(255, 215, 0, 0.25);
    color: #FFD700;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: bold;
}

.quest-completed-badge-text {
    background: #4CAF50;
    color: white;
    padding: 6px 16px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 14px;
}

/* OLD QUEST STYLES */
.quest-tabs-new {
    display: flex;
    gap: 10px;
    margin-bottom: 30px;
}

.quest-tab-new {
    flex: 1;
    padding: 15px;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    color: white;
    font-size: 1.1em;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
}

.quest-tab-new.active {
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-color: #667eea;
}

.quest-tab-content-new {
    display: none;
}

.quest-tab-content-new.active {
    display: block;
}

.quest-card-new {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 15px;
    padding: 20px;
    margin-bottom: 15px;
    transition: all 0.3s;
}

.quest-card-new:hover {
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateX(5px);
}

.quest-card-new.completed {
    border-color: #4CAF50;
    background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(56, 142, 60, 0.2));
}

.quest-header-new {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.quest-title-new {
    color: white;
    font-size: 1.2em;
    margin: 0;
}

.quest-progress-text-new {
    color: rgba(255, 255, 255, 0.8);
    font-weight: bold;
}

.quest-description-new {
    color: rgba(255, 255, 255, 0.7);
    margin: 10px 0;
}

.quest-progress-bar-new {
    height: 12px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    overflow: hidden;
    margin: 15px 0;
}

.quest-progress-fill-new {
    height: 100%;
    background: linear-gradient(90deg, #667eea, #764ba2);
    transition: width 0.5s ease;
    border-radius: 10px;
}

.quest-card-new.completed .quest-progress-fill-new {
    background: linear-gradient(90deg, #4CAF50, #8BC34A);
}

.quest-footer-new {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 15px;
}

.quest-rewards-new {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.reward-item-new {
    background: rgba(255, 215, 0, 0.2);
    color: #FFD700;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.9em;
    font-weight: bold;
}

.quest-completed-badge-new {
    background: #4CAF50;
    color: white;
    padding: 5px 15px;
    border-radius: 20px;
    font-weight: bold;
}

@media (max-width: 768px) {
    .home-header-new {
        flex-direction: column;
        gap: 15px;
    }
    
    .resources-section-new {
        width: 100%;
        justify-content: center;
    }
    
    .toast-notification {
        right: 10px;
        left: 10px;
        max-width: calc(100% - 20px);
    }
    
    .home-header {
        flex-direction: column;
        align-items: stretch;
    }
    
    .trainer-section {
        justify-content: center;
    }
    
    .resources {
        justify-content: center;
    }
    
    .home-stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .streak-tooltip-popup {
        position: fixed;
        top: 60px;
        right: 10px;
        left: auto;
        width: calc(100% - 20px);
        max-width: 320px;
    }
    
    .streak-tooltip-popup::before {
        display: none;
    }
    
    .streak-display {
        -webkit-tap-highlight-color: rgba(255, 215, 0, 0.3);
        tap-highlight-color: rgba(255, 215, 0, 0.3);
    }
}

@keyframes tooltipFade {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.streak-tooltip h4 {
    margin: 0 0 8px 0;
    font-size: 16px;
    color: #FFD700;
}

.streak-tooltip p {
    margin: 4px 0;
    color: var(--text-secondary);
}

.streak-tooltip ul {
    margin: 8px 0;
    padding-left: 20px;
    color: var(--text-secondary);
}

.streak-tooltip ul li {
    margin: 4px 0;
}

/* Mobile tap support - tooltip toggled via JavaScript */
@media (hover: none) and (pointer: coarse) {
    .streak-display {
        cursor: pointer;
    }
    
    .streak-display:active {
        transform: scale(0.95);
    }
}

/* Container */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 16px;
}

.page {
    display: none;
    /* POLISHING : Éviter le scroll indésirable sur mobile */
    overflow-x: hidden;
    max-width: 100vw;
    position: relative;
}

.page.active {
    display: block;
    /* POLISHING : S'assurer que le contenu ne dépasse pas */
    min-height: calc(100vh - 140px); /* Top bar + bottom nav */
    padding-bottom: 20px;
}

/* Page Header */
.page-header {
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 12px;
}

.page-header h1 {
    font-size: 24px;
    font-weight: 700;
}

.back-btn {
    background: var(--dark-surface);
    border: 1px solid var(--dark-border);
    color: var(--text-primary);
    padding: 8px 16px;
    border-radius: var(--radius);
    cursor: pointer;
    font-size: 14px;
    transition: var(--transition);
}

.back-btn:hover {
    background: var(--dark-elevated);
}

/* Dashboard Card */
.blind-box-home-section {
    background: var(--dark-surface);
    border: 2px solid var(--pokemon-yellow);
    border-radius: var(--radius-lg);
    padding: 20px;
    margin-bottom: 20px;
    text-align: center;
}

.blind-box-home-section h3 {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 8px;
    color: var(--pokemon-yellow);
}

.blind-box-home-section p {
    font-size: 16px;
    color: var(--text-secondary);
    margin-bottom: 0;
}

.player-profile-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 20px;
    border-radius: var(--radius-lg);
    color: white;
    margin-bottom: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}

.profile-header {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}

.profile-avatar {
    width: 60px;
    height: 60px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
    margin-right: 15px;
}

.profile-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}

.stat-box {
    background: rgba(255,255,255,0.2);
    padding: 10px;
    border-radius: 8px;
    text-align: center;
}

.dashboard-card {
    background: var(--dark-surface);
    border: 1px solid var(--dark-border);
    border-radius: var(--radius-lg);
    padding: 20px;
    margin-bottom: 20px;
}

.buddy-section {
    display: flex;
    gap: 16px;
    align-items: center;
    margin-bottom: 16px;
}

.buddy-image {
    width: 80px;
    height: 80px;
    image-rendering: pixelated;
}

.buddy-info {
    flex: 1;
}

.buddy-name {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 8px;
}

.xp-bar {
    width: 100%;
    height: 12px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 4px;
}

.xp-fill {
    height: 100%;
    background: linear-gradient(90deg, #4CAF50, #8BC34A);
    transition: width 0.5s ease;
}

.xp-text {
    font-size: 12px;
    color: var(--text-secondary);
}

.daily-quests-summary {
    text-align: center;
    color: var(--text-secondary);
    font-size: 14px;
}

/* Action Buttons */
.action-buttons {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 24px;
}

.btn-primary, .btn-secondary {
    border: none;
    border-radius: var(--radius-lg);
    padding: 16px 24px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    transition: var(--transition);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    position: relative;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    box-shadow: var(--shadow);
}

/* V12: Button hover effects */
.btn-primary:hover:not(:disabled):not([data-fishing="true"]) {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}

.btn-primary:active:not(:disabled) {
    transform: translateY(0);
}

.btn-secondary {
    background: var(--dark-surface);
    color: var(--text-primary);
    border: 2px solid var(--pokemon-yellow);
}

.btn-secondary:hover:not(:disabled) {
    background: rgba(255, 215, 0, 0.1);
}

.btn-stats {
    background: var(--dark-surface);
    border: 2px solid var(--pokemon-yellow);
    color: var(--pokemon-yellow);
    padding: 16px;
    border-radius: var(--radius-lg);
    cursor: pointer;
    font-size: 20px;
    transition: var(--transition);
    min-height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.btn-stats:hover {
    background: rgba(255, 215, 0, 0.1);
    transform: scale(1.05);
}

.btn-large {
    min-height: 60px;
    font-size: 18px;
}

.btn-icon {
    font-size: 24px;
}

.badge-counter {
    position: absolute;
    top: 8px;
    right: 12px;
    background: var(--pokemon-red);
    color: white;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 700;
}

.cooldown-timer {
    position: absolute;
    bottom: 8px;
    font-size: 12px;
    color: rgba(255, 255, 255, 0.7);
}

button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Blind Box */
.blindbox-container {
    text-align: center;
    margin-bottom: 32px;
}

.blindbox-info {
    margin-bottom: 24px;
}

.blindbox-info h2 {
    font-size: 20px;
    margin-bottom: 8px;
}

.remaining-count {
    font-size: 32px;
    font-weight: 700;
    color: var(--pokemon-yellow);
    margin: 8px 0;
}

.reset-time {
    font-size: 14px;
    color: var(--text-secondary);
}

.mystery-box {
    width: 200px;
    height: 200px;
    margin: 24px auto;
    background: linear-gradient(145deg, #FFD700, #FFA500);
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 80px;
    cursor: pointer;
    transition: transform 0.3s ease;
    box-shadow: 0 8px 24px rgba(255, 165, 0, 0.4);
}

.mystery-box:hover {
    transform: scale(1.05) rotate(5deg);
}

.mystery-box.opening {
    animation: shake 0.5s ease-in-out;
}

/* BOX OPENING ANIMATION */
.box-opening-container {
    text-align: center;
    padding: 80px 40px;
}

.gift-box-3d {
    font-size: 8em;
    animation: bounce3D 0.6s infinite alternate;
    display: inline-block;
}

@keyframes bounce3D {
    from { transform: translateY(0) scale(1); }
    to { transform: translateY(-30px) scale(1.1); }
}

.gift-box-3d.exploding {
    animation: explode3D 1s ease-out forwards;
}

@keyframes explode3D {
    0% { transform: scale(1) rotate(0deg); opacity: 1; }
    50% { transform: scale(1.5) rotate(180deg); }
    100% { transform: scale(3) rotate(360deg); opacity: 0; }
}

.opening-text {
    color: white;
    font-size: 1.3em;
    margin-top: 30px;
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.box-rewards-container {
    background: linear-gradient(135deg, #1e3a8a, #7c3aed);
    border-radius: 20px;
    padding: 40px;
    max-width: 600px;
    width: 90%;
}

.rewards-title {
    color: white;
    font-size: 2em;
    text-align: center;
    margin-bottom: 30px;
}

.rewards-grid-new {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 15px;
    margin-bottom: 30px;
}

.reward-card-new {
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    animation: rewardPop 0.5s ease-out both;
}

@keyframes rewardPop {
    0% { transform: scale(0) rotate(-180deg); opacity: 0; }
    50% { transform: scale(1.1) rotate(10deg); }
    100% { transform: scale(1) rotate(0); opacity: 1; }
}

.reward-icon-new {
    font-size: 3em;
    margin-bottom: 10px;
}

.reward-name-new {
    color: white;
    font-weight: bold;
    margin-bottom: 5px;
}

.reward-quantity-new {
    color: #FFD700;
    font-size: 1.3em;
    font-weight: bold;
}

.btn-collect {
    width: 100%;
    padding: 15px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
}

.btn-collect:hover {
    transform: scale(1.05);
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.5);
}

/* V12: Animation keyframes */
@keyframes fadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}

@keyframes fadeOut {
    from { opacity: 1; transform: scale(1); }
    to { opacity: 0; transform: scale(0.95); }
}

/* Tutorial Overlay */
.tutorial-overlay {
    animation: fadeIn 0.3s ease-in-out;
}

.tutorial-content {
    animation: scaleIn 0.3s ease-out;
}

.tutorial-content::-webkit-scrollbar {
    width: 8px;
}

.tutorial-content::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
}

.tutorial-content::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.3);
    border-radius: 10px;
}

.tutorial-content::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.5);
}

@keyframes scaleIn {
    from { transform: scale(0.8); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

@keyframes pokemonAppear {
    0% {
        opacity: 0;
        transform: scale(0.3) translateY(-50px);
    }
    60% {
        opacity: 1;
        transform: scale(1.1) translateY(0);
    }
    100% {
        transform: scale(1) translateY(0);
    }
}

@keyframes chainBump {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

@keyframes doorSlideIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes shinySparkle {
    0% {
        opacity: 0;
        transform: rotate(0deg) scale(0);
    }
    50% {
        opacity: 1;
        transform: rotate(180deg) scale(1.2);
    }
    100% {
        opacity: 0;
        transform: rotate(360deg) scale(0);
    }
}

@keyframes waterRipple {
    0% {
        transform: scale(0);
        opacity: 1;
    }
    100% {
        transform: scale(3);
        opacity: 0;
    }
}

@keyframes bobberFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
}

.pokeball-idle {
    animation: float 3s ease-in-out infinite, pokeballRotate 3s linear infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

.pokeball-3d-sphere {
    transform-style: preserve-3d;
}

.sphere-top, .sphere-bottom {
    backface-visibility: hidden;
}

@keyframes pokeball3DRotate {
    0% { transform: rotateY(0deg); }
    100% { transform: rotateY(360deg); }
}

@keyframes pokeball3DSpin {
    0% { transform: rotateY(0deg) rotateX(15deg); }
    100% { transform: rotateY(360deg) rotateX(15deg); }
}

@keyframes pokeballFloat {
    0%, 100% { transform: translateY(0px) rotateY(0deg) rotateX(15deg); }
    50% { transform: translateY(-15px) rotateY(180deg) rotateX(15deg); }
}

@keyframes shinyText {
    0% { background-position: 0% center; }
    100% { background-position: 200% center; }
}

@keyframes levelUpZoomIn {
    0% { transform: scale(0.8); opacity: 0; }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); opacity: 1; }
}

@keyframes levelPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

@keyframes rewardPop {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); opacity: 1; }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

@keyframes bubblePop {
    0% {
        transform: translateY(0) scale(0);
        opacity: 0;
    }
    50% { opacity: 1; }
    100% {
        transform: translateY(-60px) scale(1);
        opacity: 0;
    }
}

@keyframes splashEffect {
    0% {
        transform: scale(0);
        opacity: 1;
    }
    100% {
        transform: scale(2.5);
        opacity: 0;
    }
}

@keyframes fishingCast {
    0% { transform: rotate(0deg); }
    50% { transform: rotate(-45deg); }
    100% { transform: rotate(0deg); }
}

@keyframes shake {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-10deg) scale(1.1); }
    75% { transform: rotate(10deg) scale(1.1); }
}

.blindbox-history {
    background: var(--dark-surface);
    border: 1px solid var(--dark-border);
    border-radius: var(--radius-lg);
    padding: 20px;
}

.blindbox-history h3 {
    font-size: 18px;
    margin-bottom: 16px;
}

.history-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 12px;
}

.history-item {
    background: var(--dark-elevated);
    border-radius: var(--radius);
    padding: 12px;
    text-align: center;
}

.history-item img {
    width: 60px;
    height: 60px;
    image-rendering: pixelated;
}

.history-item .name {
    font-size: 12px;
    margin-top: 4px;
}

/* Pokedex */
.pokedex-progress {
    background: var(--dark-surface);
    border: 1px solid var(--dark-border);
    border-radius: var(--radius-lg);
    padding: 20px;
    margin-bottom: 20px;
}

.progress-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
    font-size: 18px;
    font-weight: 700;
}

.progress-bar {
    width: 100%;
    height: 20px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--pokemon-blue), var(--pokemon-red));
    transition: width 0.5s ease;
}

.pokedex-search-section {
    background: rgba(255,255,255,0.05);
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
}

.filter-bar {
    display: flex;
    gap: 12px;
    margin-bottom: 0;
    flex-wrap: wrap;
}

.search-box {
    width: 100%;
    padding: 12px 20px;
    background: rgba(255,255,255,0.1);
    border: 2px solid rgba(255,255,255,0.2);
    border-radius: 25px;
    color: white;
    font-size: 16px;
    margin-bottom: 15px;
    transition: all 0.3s;
}

.search-box:focus {
    outline: none;
    border-color: #667eea;
    background: rgba(255,255,255,0.15);
    box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
}

.search-box::placeholder {
    color: rgba(255,255,255,0.5);
}

.filter-row {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.filter-select {
    flex: 1;
    min-width: 180px;
    padding: 10px 15px;
    background: rgba(255,255,255,0.1);
    border: 2px solid rgba(255,255,255,0.2);
    border-radius: 12px;
    color: white;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s;
}

.filter-select:hover {
    border-color: #667eea;
    background: rgba(255,255,255,0.15);
}

.filter-select option {
    background: #2C2F33;
    color: white;
}

/* Filter styling moved above */

/* Pokemon Grid */
.pokemon-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
    gap: 12px;
}

.pokemon-card {
    background: var(--dark-surface);
    border: 2px solid transparent;
    border-radius: var(--radius-lg);
    padding: 12px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition);
    position: relative;
}

.pokemon-card:hover {
    transform: translateY(-4px);
}

.pokemon-card.owned {
    border-color: var(--dark-border);
}

.pokemon-card.locked {
    opacity: 0.4;
}

.pokemon-card.locked img {
    filter: brightness(0);
}

.pokemon-card img {
    width: 80px;
    height: 80px;
    image-rendering: pixelated;
}

.pokemon-card .number {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 4px;
}

.pokemon-card .name {
    font-size: 13px;
    font-weight: 600;
    margin-top: 4px;
}

.pokemon-card.common.owned { border-color: var(--common-color); }
.pokemon-card.uncommon.owned { border-color: var(--uncommon-color); }
.pokemon-card.rare.owned { border-color: var(--rare-color); }
.pokemon-card.super_rare.owned { border-color: var(--super-rare-color); }
.pokemon-card.legendary.owned { border-color: var(--legendary-color); }

.pokemon-card.shiny {
    border: 3px solid transparent;
    background: linear-gradient(var(--dark-surface), var(--dark-surface)) padding-box,
                linear-gradient(135deg, #FFD700, #00FFE7, #FF1493, #00FF00) border-box;
    animation: shinyGlow 2s ease-in-out infinite;
}

@keyframes shinyGlow {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.3); }
}

/* Rarity Badge */
.rarity-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    margin: 4px 0;
}

.rarity-badge.common { background: var(--common-color); color: white; }
.rarity-badge.uncommon { background: var(--uncommon-color); color: white; }
.rarity-badge.rare { background: var(--rare-color); color: white; }
.rarity-badge.super_rare { background: var(--super-rare-color); color: white; }
.rarity-badge.legendary { background: var(--legendary-color); color: white; }

/* Type Badges */
.type-badges {
    display: flex;
    gap: 6px;
    justify-content: center;
    flex-wrap: wrap;
    margin: 8px 0;
}

.type-badge {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    color: white;
}

.type-Fire { background: #F08030; }
.type-Water { background: #6890F0; }
.type-Grass { background: #78C850; }
.type-Electric { background: #F8D030; color: #333; }
.type-Psychic { background: #F85888; }
.type-Ice { background: #98D8D8; }
.type-Dragon { background: #7038F8; }
.type-Dark { background: #705848; }
.type-Fairy { background: #EE99AC; }
.type-Normal { background: #A8A878; }
.type-Fighting { background: #C03028; }
.type-Flying { background: #A890F0; }
.type-Poison { background: #A040A0; }
.type-Ground { background: #E0C068; }
.type-Rock { background: #B8A038; }
.type-Bug { background: #A8B820; }
.type-Ghost { background: #705898; }
.type-Steel { background: #B8B8D0; }

/* Quests */
.quest-tabs, .shop-tabs {
	display: flex;
	gap: 12px;
	margin-bottom: 24px;
	position: sticky;
	top: 60px;
	z-index: 50;
	background: var(--dark-bg);
	padding: 15px 0;
	border-bottom: 2px solid var(--dark-border);
}
.shop-section, .game-section {
	scroll-margin-top: 140px;
}

/* Correction : Titres blancs dans les sections de quêtes */
.game-section h2 {
	color: #FFFFFF !important;
	text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
	font-size: 1.8em !important;
	font-weight: 700 !important;
}
.game-section h3 {
	color: #FFFFFF !important;
	text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
	font-size: 1.5em !important;
	font-weight: 700 !important;
}
h3 {
	color: #FFFFFF !important;
	font-size: 1.5em !important;
}
.shop-section h2 {
	font-size: 1.8em !important;
	font-weight: 700 !important;
}
.shop-tab-button {
	flex: 1;
	padding: 14px 20px;
	background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15));
	border: 2px solid rgba(255, 255, 255, 0.15);
	border-radius: 12px;
	color: white;
	font-size: 16px;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.3s ease;
}

.shop-tab-button:hover {
	background: linear-gradient(135deg, rgba(102, 126, 234, 0.25), rgba(118, 75, 162, 0.25));
	border-color: rgba(255, 255, 255, 0.3);
	transform: translateY(-2px);
}

.shop-tab-button.active {
	background: linear-gradient(135deg, #667eea, #764ba2);
	border-color: #667eea;
	box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
}



.tab-btn {
    padding: 12px 24px;
    background: none;
    border: none;
    color: var(--text-secondary);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    margin-bottom: -2px;
    transition: var(--transition);
}

.tab-btn.active {
    color: var(--pokemon-yellow);
    border-bottom-color: var(--pokemon-yellow);
}

.quest-tab-content, .shop-tab-content {
    display: none;
}

.quest-tab-content.active, .shop-tab-content.active {
    display: block;
}

.quest-item, .shop-item {
    background: var(--dark-surface);
    border: 1px solid var(--dark-border);
    border-radius: var(--radius-lg);
    padding: 16px;
    margin-bottom: 12px;
}

.quest-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.quest-title {
    font-size: 16px;
    font-weight: 600;
}

.quest-progress {
    width: 100%;
    height: 8px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 8px;
}

.quest-progress-fill {
    height: 100%;
    background: var(--uncommon-color);
    transition: width 0.3s ease;
}

.quest-reward {
    font-size: 13px;
    color: var(--pokemon-yellow);
    font-weight: 600;
}

.claim-btn {
    background: var(--uncommon-color);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: var(--radius);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
}

.claim-btn:hover:not(:disabled) {
    transform: scale(1.05);
}

.claim-btn.claimed {
    background: var(--text-muted);
}

/* Shop */
.shop-item {
	background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
	border: 2px solid rgba(255, 255, 255, 0.15);
	border-radius: 12px;
	padding: 16px;
	margin-bottom: 16px;
	display: flex;
	justify-content: space-between;
	align-items: center;
	transition: all 0.3s ease;
}

.shop-item:hover {
	background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
	border-color: rgba(255, 255, 255, 0.3);
	transform: translateX(4px);
}

.shop-item.insufficient-funds {
    opacity: 0.5;
    filter: grayscale(50%);
}

.rate-increase {
    color: #4CAF50 !important;
    font-weight: bold;
}

.shop-price.insufficient {
    color: #ff6b6b;
}

.buy-btn.disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: #666;
}

.shop-info h3 {
    font-size: 16px;
    margin-bottom: 4px;
    color: #FFFFFF !important;
    font-weight: 600;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.page-header h1 {
    color: #FFFFFF !important;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
}

/* V13: Shop & Profile page title visibility fix - Enhanced */
#shop-page .page-header h1,
#shop-page h1,
#shop-page .page-header,
#profile-page .page-header h1,
#profile-page h1,
#profile-page h2,
#profile-page h3,
#profile-page h4,
.page-header h1,
.profile-section h2,
.profile-section-title {
    color: #FFFFFF !important;
    font-size: 2.2em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    margin-bottom: 25px;
    font-weight: bold;
}

/* Ensure all page headers are visible */
.page-header h1,
.page-header h2,
.page-header h3 {
    color: #FFFFFF !important;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
}

.shop-info .shop-description {
    font-size: 13px;
    color: #CCCCCC;
    line-height: 1.4;
    margin-top: 4px;
}

.shop-info .shop-effect {
    font-size: 12px;
    color: #4CAF50;
    font-weight: 500;
    margin-top: 2px;
}

.shop-info h3.old-h3 {
    font-size: 16px;
    margin-bottom: 4px;
}

.shop-info p {
    font-size: 13px;
    color: var(--text-secondary);
}

.shop-price {
    font-size: 18px;
    font-weight: 700;
    color: #FFD700;
    margin-right: 12px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

.shop-price.old-price {
    font-size: 18px;
    font-weight: 700;
    color: var(--pokemon-yellow);
    margin-right: 12px;
}

.buy-btn {
    background: var(--pokemon-blue);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: var(--radius);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
}

.buy-btn:hover:not(:disabled) {
    transform: scale(1.05);
}

/* Fishing */
.fishing-container {
    text-align: center;
}
.fishing-locked {
    opacity: 0.5 !important;
    filter: grayscale(1) !important;
    pointer-events: none !important;
}
.boost-indicator {
    position: relative;
    transition: all 0.3s ease;
}
.boost-indicator:hover {
    background: rgba(102, 126, 234, 0.5) !important;
    transform: scale(1.05);
}
.boost-indicator::after {
    content: attr(title);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 0.85em;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
    margin-bottom: 5px;
}
.boost-indicator:hover::after {
    opacity: 1;
}

.fishing-info {
    background: var(--dark-surface);
    border: 1px solid var(--dark-border);
    border-radius: var(--radius-lg);
    padding: 16px;
    margin-bottom: 24px;
    font-size: 18px;
    font-weight: 600;
}

.water-surface {
    position: relative;
    width: 100%;
    height: 180px;
    background: linear-gradient(180deg, rgba(59, 130, 246, 0.3) 0%, rgba(29, 78, 216, 0.5) 100%);
    border-radius: var(--radius-lg);
    overflow: hidden;
    margin-bottom: 24px;
}

.bobber {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 32px;
    animation: bobberFloat 2s ease-in-out infinite;
}

.water-ripple {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 40px;
    height: 40px;
    border: 2px solid rgba(59, 130, 246, 0.6);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    animation: waterRipple 2s ease-out infinite;
}

.bubble {
    position: absolute;
    width: 10px;
    height: 10px;
    background: rgba(255, 255, 255, 0.6);
    border-radius: 50%;
    animation: bubblePop 2s ease-out infinite;
}

.splash-particle {
    position: absolute;
    width: 20px;
    height: 20px;
    background: rgba(59, 130, 246, 0.8);
    border-radius: 50%;
    animation: splashEffect 0.6s ease-out forwards;
}

.pokemon-appear {
    animation: pokemonAppear 1s ease-out;
}

.shiny-sparkle-effect {
    animation: shinySparkle 1.5s ease-out;
}

.fishing-animation {
    min-height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 24px;
}

.fishing-rod-cast {
    animation: fishingCast 0.8s ease-out;
}

.fishing-rod {
    font-size: 80px;
    animation: fishing 2s ease-in-out infinite;
}

.inventory-section {
    margin-bottom: 40px;
}

.inventory-section h2 {
    color: white;
    margin-bottom: 20px;
    font-size: 1.5em;
}

.inventory-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 20px;
}

.inventory-item {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);
    border: 2px solid rgba(255,255,255,0.1);
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    transition: all 0.3s;
}

.inventory-item:hover {
    transform: translateY(-5px);
    border-color: rgba(255,255,255,0.3);
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

.inventory-item.not-owned {
    opacity: 0.5;
    filter: grayscale(50%);
}

.item-icon {
    font-size: 3em;
    margin-bottom: 10px;
}

.item-name {
    font-size: 1.1em;
    font-weight: bold;
    margin: 10px 0;
    color: white;
}

.item-quantity {
    font-size: 1.5em;
    color: #FFD700;
    font-weight: bold;
    margin: 10px 0;
}

.item-description {
    font-size: 0.85em;
    color: rgba(255,255,255,0.7);
    margin-bottom: 15px;
}

.item-open-btn {
    width: 100%;
    padding: 10px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 1em;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s;
}

.item-open-btn:hover:not(:disabled) {
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.5);
}

.item-open-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Shop section styling */
.shop-section {
    margin-bottom: 40px;
    scroll-margin-top: 80px;
}

.shop-section h2 {
    color: #FFFFFF !important;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    font-weight: bold;
    margin-bottom: 16px;
}

/* Filter bar for Pokedex */
.filter-bar {
    display: flex;
    gap: 12px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.search-box {
    flex: 1;
    min-width: 200px;
    padding: 12px;
    background: var(--dark-surface);
    border: 1px solid var(--dark-border);
    border-radius: var(--radius);
    color: var(--text-primary);
    font-size: 14px;
}

.search-box::placeholder {
    color: var(--text-secondary);
}

/* Lootbox reveal styling */
.lootbox-reveal h1 {
    color: #FFFFFF !important;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
}

.stats-container {
    background: var(--dark-surface);
    border: 1px solid var(--dark-border);
    border-radius: var(--radius-lg);
    padding: 20px;
}

.stat-box {
    background: var(--dark-elevated);
    border-radius: var(--radius);
    padding: 16px;
    margin-bottom: 16px;
}

.stat-box h3 {
    font-size: 16px;
    color: var(--pokemon-yellow);
    margin-bottom: 12px;
}

.stat-line {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    font-size: 14px;
}

.stat-line span:first-child {
    color: var(--text-secondary);
}

.stat-line span:last-child {
    color: var(--text-primary);
    font-weight: 600;
}

@keyframes fishing {
    0%, 100% { transform: rotate(-10deg); }
    50% { transform: rotate(10deg); }
}

/* Profile */
.profile-content {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.profile-section {
    background: var(--dark-surface);
    border: 1px solid var(--dark-border);
    border-radius: var(--radius-lg);
    padding: 20px;
}

.profile-section h2 {
    font-size: 18px;
    margin-bottom: 16px;
    border-bottom: 2px solid var(--dark-border);
    padding-bottom: 8px;
    color: #FFFFFF !important;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
}

/* V13 Profile text visibility */
#profileScreen h2,
#profileScreen h3,
#profileScreen h4 {
    color: #FFFFFF !important;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
    font-weight: bold;
}

.stat-item, .stats-grid .stat-item {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid var(--dark-border);
}

.stat-item:last-child {
    border-bottom: none;
}

.stats-grid {
    display: grid;
    gap: 8px;
}

.region-item {
    padding: 12px;
    background: var(--dark-elevated);
    border-radius: var(--radius);
    margin-bottom: 8px;
}

.region-item.locked {
    opacity: 0.5;
}

.region-progress-section {
    background: linear-gradient(135deg, #FF6B6B 0%, #FFE66D 100%);
    padding: 25px;
    border-radius: var(--radius-lg);
    margin-bottom: 20px;
    color: white;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}

.current-region {
    background: rgba(255,255,255,0.2);
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 15px;
}

.progress-stats {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}

.progress-bar-container {
    background: rgba(0,0,0,0.3);
    height: 20px;
    border-radius: 10px;
    overflow: hidden;
}

.progress-bar-fill {
    background: linear-gradient(90deg, #4CAF50, #8BC34A);
    height: 100%;
    transition: width 0.5s ease;
}

.next-region {
    background: rgba(0,0,0,0.2);
    padding: 15px;
    border-radius: 10px;
}

.pokemon-detail-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
}

.pokemon-detail-content {
    background: linear-gradient(135deg, #2C2F33 0%, #1a1c1f 100%);
    padding: 30px;
    border-radius: 20px;
    max-width: 500px;
    color: white;
    text-align: center;
    max-height: 90vh;
    overflow-y: auto;
}

.sprite-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 20px;
}

.normal-sprite,
.shiny-sprite {
    text-align: center;
}

.pokemon-info {
    text-align: left;
    background: rgba(255,255,255,0.1);
    padding: 15px;
    border-radius: 10px;
    margin-bottom: 20px;
}

.action-buttons {
    display: flex;
    gap: 10px;
    justify-content: center;
}

/* Bottom Navigation */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--dark-elevated);
    border-top: 1px solid var(--dark-border);
    display: flex;
    justify-content: space-around;
    padding: 8px 0;
    padding-bottom: max(8px, env(safe-area-inset-bottom));
    z-index: 100;
    overflow-x: auto;
    overflow-y: hidden;
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 8px 12px;
    cursor: pointer;
    transition: var(--transition);
    border: none;
    background: none;
    color: var(--text-secondary);
    position: relative;
}

.nav-item.active {
    color: var(--pokemon-yellow);
}

#quest-notif-badge {
    position: absolute;
    top: 2px;
    right: 8px;
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.6);
    animation: pulse-notification 2s infinite;
}

@keyframes pulse-notification {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
}

.nav-icon {
    font-size: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.nav-icon img {
    width: 1.5em;
    height: 1.5em;
    image-rendering: pixelated;
    object-fit: contain;
}

.nav-label {
    font-size: 11px;
    font-weight: 600;
}

/* Modals */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.modal.active {
    display: flex;
}

.modal-content {
    background: var(--dark-surface);
    border-radius: var(--radius-lg);
    max-width: 500px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    animation: modalAppear 0.3s ease;
    /* POLISHING : Éviter le scroll sur mobile */
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
}

@keyframes modalAppear {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    border-bottom: 1px solid var(--dark-border);
}

.modal-header h2 {
    font-size: 20px;
}

.wild-pokemon-label {
    color: #FFD700 !important;
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
}

.pokemon-name-display {
    color: #FFFFFF !important;
    font-size: 1.8em;
    font-weight: bold;
    text-shadow: 2px 2px 6px rgba(0,0,0,0.9);
}

.choose-pokeball-label {
    color: #FFFFFF !important;
    font-size: 1.2em;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
}

.pokemon-encounter p,
.pokemon-encounter label {
    color: #FFFFFF !important;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
}

.close-btn {
    background: none;
    border: none;
    color: var(--text-primary);
    font-size: 32px;
    cursor: pointer;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
}

.close-btn:hover {
    color: var(--pokemon-red);
}

.pokemon-encounter {
    padding: 24px;
    text-align: center;
}

.encounter-sprite {
    width: 150px;
    height: 150px;
    image-rendering: pixelated;
}

.pokemon-encounter h3 {
    font-size: 24px;
    margin: 12px 0;
}

.pokeball-selector {
    padding: 20px;
    border-top: 1px solid var(--dark-border);
}

.pokeball-selector h3 {
    font-size: 16px;
    margin-bottom: 16px;
}

.pokeball-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.pokeball-option {
    background: var(--dark-elevated);
    border: 2px solid var(--dark-border);
    border-radius: var(--radius);
    padding: 16px;
    text-align: center;
    cursor: pointer;
    transition: var(--transition);
}

.pokeball-option:hover:not(.disabled) {
    border-color: var(--pokemon-yellow);
    transform: scale(1.05);
}

.pokeball-option.disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.pokeball-icon {
    font-size: 32px;
    margin-bottom: 8px;
}

.pokeball-name {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 4px;
}

.pokeball-count {
    font-size: 12px;
    color: var(--text-secondary);
}

.catch-rate {
    font-size: 16px;
    color: var(--uncommon-color);
    font-weight: 700;
    margin-top: 4px;
}

/* Reveal Modal */
.reveal-content {
    padding: 32px;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.particles {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.particle {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    animation: float 2s ease-out forwards;
}

@keyframes float {
    0% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
    100% {
        transform: translateY(-300px) scale(0);
        opacity: 0;
    }
}

.reveal-pokemon {
    position: relative;
    z-index: 1;
}

.revealed-sprite {
    width: 200px;
    height: 200px;
    image-rendering: pixelated;
    animation: bounce 0.6s ease;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-30px); }
}

#revealed-name {
    font-size: 28px;
    font-weight: 700;
    margin: 16px 0;
}

.new-badge {
    display: inline-block;
    background: var(--pokemon-red);
    color: white;
    padding: 8px 20px;
    border-radius: var(--radius);
    font-weight: 700;
    font-size: 16px;
    margin: 12px 0;
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

@keyframes levelUpPop {
    0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
    50% { transform: translate(-50%, -50%) scale(1.1); }
    100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}

.duplicate-info {
    font-size: 16px;
    color: var(--text-secondary);
    margin: 12px 0;
}

.coins-earned {
    font-size: 24px;
    font-weight: 700;
    color: var(--pokemon-yellow);
    margin: 12px 0;
}

/* Toast */
.toast {
    position: fixed;
    top: 80px;
    right: 20px;
    background: var(--dark-elevated);
    border: 1px solid var(--dark-border);
    padding: 16px 20px;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    z-index: 1001;
    max-width: 300px;
    animation: slideIn 0.3s ease;
    display: none;
}

.toast.show {
    display: block;
}

@keyframes slideInRight {
    from {
        transform: translateX(400px);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(400px);
        opacity: 0;
    }
}

/* ===== MURMURES D'ENTROPIE - Dialogues non bloquants ===== */
@keyframes whisperFadeIn {
    from {
        opacity: 0;
        transform: translateX(-50%) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
}

@keyframes whisperFadeOut {
    from {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }
    to {
        opacity: 0;
        transform: translateX(-50%) translateY(-20px);
    }
}

.entropy-whisper {
    animation: whisperFadeIn 0.5s ease, whisperFadeOut 0.5s ease 4.5s forwards;
}

/* ===== SYSTEM OVERRIDE - Animations de surcharge système ===== */
@keyframes system-override {
    0% { 
        filter: invert(0) hue-rotate(0deg); 
        transform: scale(1); 
    }
    25% { 
        filter: invert(0.1) hue-rotate(90deg); 
        transform: scale(1.01) skewX(1deg); 
    }
    50% { 
        filter: invert(1) hue-rotate(180deg); 
        transform: scale(1.02) skewX(2deg); 
    }
    75% { 
        filter: invert(0.1) hue-rotate(270deg); 
        transform: scale(1.01) skewX(-1deg); 
    }
    100% { 
        filter: invert(0) hue-rotate(360deg); 
        transform: scale(1); 
    }
}

.system-override-active {
    animation: system-override 0.2s infinite;
    pointer-events: none;
}

.system-override-active * {
    pointer-events: none !important;
}

/* Pluie de données (Matrix overlay) pour moments critiques */
.matrix-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, rgba(0,255,0,0) 0%, rgba(0,255,0,0.1) 50%, rgba(0,255,0,0) 100%);
    background-image: 
        repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,255,0,0.03) 2px, rgba(0,255,0,0.03) 4px);
    z-index: 9999;
    pointer-events: none;
    mix-blend-mode: overlay;
    animation: matrixRain 20s linear infinite;
}

@keyframes matrixRain {
    0% {
        background-position: 0 0;
    }
    100% {
        background-position: 0 100vh;
    }
}

/* Effet d'ombre de glitch (MissingNo) */
.glitch-shadow {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('https://archives.bulbagarden.net/media/upload/thumb/9/95/Missingno_RB.png/96px-Missingno_RB.png') center/200px no-repeat;
    opacity: 0.1;
    filter: invert(1) hue-rotate(180deg) blur(10px);
    z-index: 5000;
    pointer-events: none;
    animation: glitchShadowAppear 0.5s ease, glitchShadowDisappear 0.5s ease 2s forwards;
}

/* ===== ARCHITECTURE V7.0 GENESIS - FONDS CSS PROCÉDURAUX ===== */
/* Remplace les fichiers room_*.png par des gradients CSS */

/* Plaine (Common) */
.bg-plain {
    background: linear-gradient(180deg, #81C784 0%, #2E7D32 100%);
    position: relative;
    overflow: hidden;
}

.bg-plain::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
    animation: floatingParticles 10s infinite ease-in-out;
}

@keyframes floatingParticles {
    0%, 100% { transform: translateY(0) translateX(0); }
    50% { transform: translateY(-20px) translateX(10px); }
}

/* Océan (Water) */
.bg-ocean {
    background: radial-gradient(circle at 50% 120%, #0288D1 20%, #01579B 100%);
    position: relative;
    overflow: hidden;
}

.bg-ocean::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 200%;
    height: 200%;
    background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(255,255,255,0.03) 2px,
        rgba(255,255,255,0.03) 4px
    );
    animation: waveMotion 3s infinite linear;
}

@keyframes waveMotion {
    0% { transform: translateX(0) translateY(0); }
    100% { transform: translateX(-50%) translateY(-10px); }
}

/* Grotte (Cave) */
.bg-cave {
    background: conic-gradient(from 90deg at 50% 50%, #424242, #212121, #424242);
    position: relative;
    overflow: hidden;
}

.bg-cave::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 200px;
    height: 200px;
    background: radial-gradient(circle, rgba(255,200,0,0.3) 0%, transparent 70%);
    transform: translate(-50%, -50%);
    animation: flicker 2s infinite;
}

@keyframes flicker {
    0%, 100% { opacity: 0.3; transform: translate(-50%, -50%) scale(1); }
    50% { opacity: 0.6; transform: translate(-50%, -50%) scale(1.1); }
}

/* Salle Boss (Legendary) */
.bg-boss-room {
    background: 
        radial-gradient(circle at center, transparent 0%, #000 100%),
        repeating-linear-gradient(45deg, #2a0a38 0px, #2a0a38 20px, #1a0524 20px, #1a0524 40px);
    position: relative;
    overflow: hidden;
}

.bg-boss-room::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle, rgba(255,0,0,0.1) 0%, transparent 70%);
    animation: dangerPulse 2s infinite;
}

@keyframes dangerPulse {
    0% { opacity: 0.5; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
    100% { opacity: 0.5; transform: scale(1); }
}

/* The Void (Flee) */
.bg-void {
    background: #1a1a2e;
    position: relative;
    overflow: hidden;
}

.bg-void::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,0,255,0.03) 2px, rgba(255,0,255,0.03) 4px),
        repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,255,255,0.03) 2px, rgba(0,255,255,0.03) 4px);
    animation: glitchEffect 0.1s infinite;
}

@keyframes glitchEffect {
    0% { transform: translate(0); filter: hue-rotate(0deg); }
    25% { transform: translate(-2px, 2px); filter: hue-rotate(90deg); }
    50% { transform: translate(2px, -2px); filter: hue-rotate(180deg); }
    75% { transform: translate(-2px, -2px); filter: hue-rotate(270deg); }
    100% { transform: translate(0); filter: hue-rotate(360deg); }
}

@keyframes glitchShadowAppear {
    from {
        opacity: 0;
        transform: scale(0.5);
    }
    to {
        opacity: 0.1;
        transform: scale(1);
    }
}

@keyframes glitchShadowDisappear {
    from {
        opacity: 0.1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(1.5);
    }
}

.toast-notification {
    position: fixed;
    top: 80px;
    right: 20px;
    z-index: 10000;
    font-weight: 600;
}

@keyframes slideIn-old {
    from {
        transform: translateX(400px);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* V13 Text Readability Improvements - Enhanced */
.catch-modal h2,
.catch-modal h3,
.catch-modal p,
.catch-modal label,
.catch-modal-content h2,
.catch-modal-content h3,
.catch-modal-content p,
.catch-modal-content label,
#catchModal h2,
#catchModal h3,
#catchModal p,
#catchModal label,
.modal-header h2 {
  color: #FFFFFF !important;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
  font-weight: 600;
}

.wild-label,
[class*="wild"],
[class*="sauvage"] {
  color: #FFD700 !important;
  font-weight: bold;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
}

.pokemon-name {
  color: #FFFFFF !important;
  font-size: 1.8em;
  font-weight: bold;
  text-shadow: 2px 2px 6px rgba(0,0,0,0.9);
}

/* V13 Hide non-functional close button - Enhanced */
.catch-modal .close-btn,
.catch-modal .modal-close,
.catch-modal .close-button,
#catchModal .close-btn,
#catchModal .modal-close,
#catch-modal .close-btn,
.catch-modal-content .close-button,
.catch-modal [class*="close"]:not(.btn-primary),
.catch-modal-content [class*="close"]:not(.btn-primary),
.modal-header .close-btn {
  display: none !important;
}

/* Responsive */
.box-opening-animation {
    text-align: center;
    padding: 60px;
}

.gift-box-animated {
    font-size: 6em;
    position: relative;
    animation: bounceBox 0.5s infinite alternate;
}

@keyframes bounceBox {
    from { transform: translateY(0px); }
    to { transform: translateY(-20px); }
}

@keyframes twinkle {
    0%, 100% { opacity: 0; transform: scale(0.5); }
    50% { opacity: 1; transform: scale(1.5); }
}

.gift-box-animated.explode {
    animation: explodeBox 0.8s ease-out forwards;
}

@keyframes explodeBox {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.5) rotate(180deg); }
    100% { transform: scale(2) rotate(360deg); opacity: 0; }
}

.box-shine {
    position: absolute;
    top: -20px;
    right: -20px;
    width: 40px;
    height: 40px;
    background: radial-gradient(circle, rgba(255,255,255,0.8), transparent);
    border-radius: 50%;
    animation: shineAnim 1s infinite;
}

@keyframes shineAnim {
    0%, 100% { opacity: 0; }
    50% { opacity: 1; }
}

.opening-text {
    font-size: 1.2em;
    color: white;
    margin-top: 20px;
}

.box-rewards-modal {
    padding: 30px;
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
}

.box-rewards-modal h2 {
    color: white;
    margin-bottom: 30px;
    font-size: 2em;
}

.rewards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 15px;
    margin: 30px 0;
}

.reward-card {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(118, 75, 162, 0.3));
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    animation: rewardAppear 0.5s ease-out;
}

@keyframes rewardAppear {
    from { transform: scale(0) rotate(-180deg); opacity: 0; }
    to { transform: scale(1) rotate(0); opacity: 1; }
}

.reward-icon {
    font-size: 3em;
    margin-bottom: 10px;
}

.reward-name {
    font-size: 0.9em;
    color: white;
    margin-bottom: 5px;
}

.reward-quantity {
    font-size: 1.2em;
    color: #FFD700;
    font-weight: bold;
}

.lootbox-reveal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    z-index: 2000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.lootbox-items {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 16px;
    max-width: 600px;
    margin: 20px 0;
}

.lootbox-item {
    background: var(--dark-surface);
    border: 2px solid var(--pokemon-yellow);
    border-radius: var(--radius-lg);
    padding: 16px;
    text-align: center;
    animation: itemReveal 0.5s ease-out forwards;
    opacity: 0;
}

@keyframes timingMove {
    0% { left: 0; }
    100% { left: calc(100% - 20px); }
}

.rogue-floor-card {
    transition: all 0.3s ease;
}

.rogue-floor-card:hover {
    transform: translateX(5px);
}

.rogue-event-modal {
    animation: fadeIn 0.3s ease;
}

#buddy-display {
    transition: all 0.3s ease;
}

#buddy-display:hover {
    background: rgba(102, 126, 234, 0.5);
    transform: scale(1.05);
}

@keyframes buddyLevelUp {
    0% { transform: scale(1); }
    50% { transform: scale(1.1) rotate(5deg); }
    100% { transform: scale(1); }
}

.buddy-level-up {
    animation: buddyLevelUp 0.5s ease;
}

#rogue-map-container {
    animation: slideInUp 0.5s ease;
}

@keyframes slideInUp {
    from {
        opacity: 0;
        transform: translateY(50px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.event-card {
    position: relative;
    overflow: hidden;
}

.event-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
    transform: rotate(45deg);
    animation: shimmer 3s infinite;
}

@keyframes shimmer {
    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
}

@keyframes pokemonFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

@keyframes blessingGlow {
    0%, 100% { filter: drop-shadow(0 0 10px rgba(139, 92, 246, 0.5)); transform: scale(1); }
    50% { filter: drop-shadow(0 0 20px rgba(139, 92, 246, 1)); transform: scale(1.1); }
}

@keyframes sparkleFloat {
    0% { transform: translateY(0) rotate(0deg) scale(1); opacity: 1; }
    100% { transform: translateY(-100px) rotate(360deg) scale(0); opacity: 0; }
}

@keyframes captureSuccess {
    0% { transform: scale(1) rotate(0deg); opacity: 1; }
    50% { transform: scale(0.5) rotate(180deg); opacity: 0.7; }
    100% { transform: scale(1) rotate(360deg); opacity: 1; }
}

@media (max-width: 768px) {
    .rogue-floor-card {
        padding: 12px;
    }
    
    .rogue-floor-card .btn {
        padding: 12px 8px;
        font-size: 0.9em;
    }
    
    #buddy-display {
        flex-direction: column;
        gap: 4px;
    }
}

@keyframes itemReveal {
    from {
        opacity: 0;
        transform: scale(0.5) rotate(-180deg);
    }
    to {
        opacity: 1;
        transform: scale(1) rotate(0deg);
    }
}

.lootbox-item-icon {
    font-size: 48px;
    margin-bottom: 8px;
}

.lootbox-item-name {
    font-size: 14px;
    font-weight: 600;
}

.lootbox-item-qty {
    font-size: 20px;
    font-weight: 700;
    color: var(--pokemon-yellow);
    margin-top: 4px;
}

#ball-selector button:last-child:nth-child(odd),
.fishing-modal [style*="display: grid"] button:last-child:nth-child(odd) {
    grid-column: 1 / -1;
}

@media (max-width: 400px) {
    #ball-selector {
        grid-template-columns: 1fr !important;
    }
    
    #ball-selector button {
        width: 100%;
        padding: 12px !important;
    }
    
    #ball-selector button:last-child:nth-child(odd) {
        grid-column: 1;
    }
}

@media (max-width: 375px) {
    .nav-item {
        flex: 0 0 auto;
        min-width: 60px;
        padding: 6px 8px;
    }
    
    .nav-label {
        font-size: 10px;
    }
    
    .nav-icon {
        font-size: 20px;
    }
}

@media (max-width: 768px) {
    .home-header-container {
        flex-direction: column;
        align-items: stretch;
    }
    
    .trainer-display {
        min-width: 100%;
    }
    
    .resources-display {
        justify-content: center;
        width: 100%;
    }
    
    .inventory-cards-grid {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 15px;
    }
    
    .quest-tab-button {
        padding: 12px 16px;
        font-size: 16px;
    }
    
    .container {
        padding: 12px;
    }
    
    .filter-bar {
        flex-direction: column;
    }
    
    .search-box,
    .filter-select {
        width: 100%;
    }
    
    .pokemon-grid {
        grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
        gap: 8px;
    }
    
    .pokemon-card img {
        width: 64px;
        height: 64px;
    }
    
    .mystery-box {
        width: 160px;
        height: 160px;
        font-size: 64px;
    }
    
    .modal-content {
        margin: 0 12px;
    }
}

/* ============================================
   CARTE POKÉDEX SHINY COMPLÈTE (Normal + Shiny)
   ============================================ */
.pokemon-card-shiny-complete {
    position: relative;
    overflow: hidden;
}
.pokemon-card-shiny-complete::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, #FFD700, #FFA500, #FF1493, #9333EA, #3B82F6, #10B981, #FFD700);
    border-radius: 12px;
    z-index: -1;
    animation: shinyBorderRotate 4s linear infinite;
    background-size: 400% 400%;
}
@keyframes shinyBorderRotate {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}
@keyframes shinyCardPulse {
    0%, 100% {
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.4), 0 0 40px rgba(147, 51, 234, 0.2), inset 0 0 30px rgba(255, 215, 0, 0.1);
        transform: scale(1);
    }
    50% {
        box-shadow: 0 0 30px rgba(255, 215, 0, 0.6), 0 0 60px rgba(147, 51, 234, 0.4), inset 0 0 40px rgba(255, 215, 0, 0.15);
        transform: scale(1.02);
    }
}
.pokemon-card-shiny-complete::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transform: rotate(45deg);
    animation: shinyCardSweep 3s ease-in-out infinite;
}
@keyframes shinyCardSweep {
    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    50%, 100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
}
.pokemon-card-shiny-complete:hover {
    transform: translateY(-8px) scale(1.05) !important;
    box-shadow: 0 0 40px rgba(255, 215, 0, 0.8), 0 0 80px rgba(147, 51, 234, 0.6), inset 0 0 50px rgba(255, 215, 0, 0.2) !important;
    z-index: 10;
}
.pokemon-card-shiny-complete .shiny-indicator {
    position: absolute;
    top: 5px;
    right: 5px;
    font-size: 20px;
    animation: shinySparkleIndicator 2s ease-in-out infinite;
    filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.8));
}
@keyframes shinySparkleIndicator {
    0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
    25% { transform: scale(1.3) rotate(10deg); opacity: 0.8; }
    75% { transform: scale(1.3) rotate(-10deg); opacity: 0.8; }
}
@keyframes shinyImageFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
}
.pokemon-card-shiny-complete .shiny-shadow {
    display: none;
}

/* --- OPTIMISATION MOBILE (A ajouter à la fin de style.css) --- */

/* 1. Réactivité immédiate (supprime le délai 300ms) */
a, button, input, select, .card-container, .poker-card, .pokemon-card {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
}

/* 2. Performance Animations (Force GPU) */
.modal, .pokeball-3d-sphere, .gift-box-3d, .shiny-card-effect {
    will-change: transform, opacity;
    transform: translateZ(0);
}

/* 3. Gestion propre du Hover sur mobile */
@media (hover: hover) {
    .btn:hover { transform: translateY(-2px); }
    .pokemon-card:hover { transform: translateY(-5px); }
}

@media (hover: none) {
    /* Feedback visuel immédiat au toucher */
    .btn:active { transform: scale(0.95) !important; }
    .pokemon-card:active { transform: scale(0.98); }
    /* Désactiver les animations lourdes continues sur mobile */
    .pokemon-card-shiny-complete { animation: none !important; box-shadow: 0 0 10px rgba(255, 215, 0, 0.5) !important; }
}

/* 4. Optimisation rendu des listes longues */
#pokemon-grid, #inventory-grid { contain: content; }

/* 5. Safe Area (Encoches iPhone) - Déjà géré dans .top-bar ci-dessus */
.bottom-nav { padding-bottom: env(safe-area-inset-bottom); min-height: 70px; }
.pokemon-card-shiny-complete .name {
    background: linear-gradient(90deg, #FFD700, #FFA500, #FFD700);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: bold;
    animation: shinyTextShine 3s ease-in-out infinite;
}
@keyframes shinyTextShine {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}
@media (max-width: 768px) {
    .pokemon-card-shiny-complete {
        animation: shinyCardPulse 4s ease-in-out infinite;
    }
    .pokemon-card-shiny-complete::after {
        animation: shinyCardSweep 4s ease-in-out infinite;
    }
    .pokemon-card-shiny-complete:hover {
        transform: translateY(-5px) scale(1.03) !important;
    }
}

/* ===== EFFET GOLDEN POKÉMON (V8.0) ===== */
.pokemon-card.golden {
    border-color: #FFD700 !important;
    box-shadow: 0 0 15px #FFD700, inset 0 0 20px rgba(255, 215, 0, 0.3) !important;
    background: linear-gradient(135deg, #FFF8E1, #FFECB3);
}

.pokemon-card.golden img {
    filter: sepia(1) hue-rotate(40deg) saturate(3) drop-shadow(0 0 5px #FFD700);
}

.pokemon-card.golden .shiny-indicator::after {
    content: "🌟";
}

@keyframes eggShake {
    0%, 100% { transform: rotate(-5deg); }
    50% { transform: rotate(5deg); }
}

/* ===== ANIMATIONS PREMIUM FX (V9.0) ===== */

/* Tremblement d'écran */
.shake-screen {
    animation: screenShake 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97) !important;
}

@keyframes screenShake {
    0%, 100% { transform: translate(0, 0); }
    10% { transform: translate(-2px, -1px) rotate(-0.5deg); }
    20% { transform: translate(2px, 1px) rotate(0.5deg); }
    30% { transform: translate(-1px, 2px) rotate(-0.5deg); }
    40% { transform: translate(1px, -2px) rotate(0.5deg); }
    50% { transform: translate(-2px, 1px) rotate(-0.5deg); }
    60% { transform: translate(2px, -1px) rotate(0.5deg); }
    70% { transform: translate(-1px, -2px) rotate(-0.5deg); }
    80% { transform: translate(1px, 2px) rotate(0.5deg); }
    90% { transform: translate(-2px, -1px) rotate(-0.5deg); }
}

/* Animation premium pour lootbox */
@keyframes premiumLootboxShake {
    0%, 100% { 
        transform: translate(0, 0) rotate(0deg) scale(1);
        filter: drop-shadow(0 0 30px rgba(255,215,0,0.8));
    }
    25% { 
        transform: translate(-3px, -3px) rotate(-2deg) scale(1.05);
        filter: drop-shadow(0 0 40px rgba(255,215,0,1));
    }
    50% { 
        transform: translate(3px, 3px) rotate(2deg) scale(1.1);
        filter: drop-shadow(0 0 50px rgba(255,215,0,1));
    }
    75% { 
        transform: translate(-2px, 2px) rotate(-1deg) scale(1.05);
        filter: drop-shadow(0 0 40px rgba(255,215,0,0.9));
    }
}

@keyframes premiumLootboxExplode {
    0% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
        filter: drop-shadow(0 0 50px rgba(255,215,0,1));
    }
    50% {
        transform: scale(1.3) rotate(180deg);
        opacity: 0.9;
        filter: drop-shadow(0 0 80px rgba(255,215,0,1)) brightness(1.5);
    }
    100% {
        transform: scale(0) rotate(360deg);
        opacity: 0;
        filter: drop-shadow(0 0 100px rgba(255,215,0,0));
    }
}

/* Rayons divins (arrière-plan pour lootbox) */
.god-rays-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(
        circle at center,
        rgba(255, 215, 0, 0.3) 0%,
        rgba(255, 165, 0, 0.2) 30%,
        rgba(255, 69, 0, 0.1) 60%,
        transparent 100%
    );
    animation: godRaysRotate 3s linear infinite;
    pointer-events: none;
    z-index: 1;
}

@keyframes godRaysRotate {
    0% { transform: rotate(0deg); opacity: 0.3; }
    50% { opacity: 0.5; }
    100% { transform: rotate(360deg); opacity: 0.3; }
}

/* Effet holographique pour cartes shiny */
.shiny-card-effect {
    position: relative;
    overflow: hidden;
}

.shiny-card-effect::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        45deg,
        transparent 30%,
        rgba(255, 255, 255, 0.1) 50%,
        transparent 70%
    );
    transform: rotate(45deg);
    animation: shimmer 3s infinite;
    pointer-events: none;
    z-index: 1;
}

@keyframes shimmer {
    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
}

/* Animation de capture réussie premium */
@keyframes captureSuccess {
    0% {
        transform: scale(1);
        filter: brightness(1);
    }
    25% {
        transform: scale(1.1) rotate(5deg);
        filter: brightness(1.3);
    }
    50% {
        transform: scale(1.05) rotate(-5deg);
        filter: brightness(1.5);
    }
    75% {
        transform: scale(1.08) rotate(3deg);
        filter: brightness(1.2);
    }
    100% {
        transform: scale(1);
        filter: brightness(1);
    }
}

.capture-success-flash {
    animation: captureSuccess 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Rebond premium (pour Level Up, etc.) */
@keyframes premiumBounce {
    0% {
        transform: scale(0.3) translateY(0);
        opacity: 0;
    }
    50% {
        transform: scale(1.1) translateY(-20px);
        opacity: 1;
    }
    70% {
        transform: scale(0.95) translateY(10px);
    }
    100% {
        transform: scale(1) translateY(0);
        opacity: 1;
    }
}

.premium-bounce {
    animation: premiumBounce 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Pulse premium avec glow */
@keyframes premiumPulse {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 0 40px rgba(255, 215, 0, 0.9);
    }
}

.premium-pulse {
    animation: premiumPulse 2s ease-in-out infinite;
}

/* Glow animé pour objets rares */
@keyframes rareGlow {
    0%, 100% {
        box-shadow: 0 0 10px rgba(138, 43, 226, 0.5),
                    0 0 20px rgba(138, 43, 226, 0.3),
                    inset 0 0 20px rgba(138, 43, 226, 0.1);
    }
    50% {
        box-shadow: 0 0 20px rgba(138, 43, 226, 0.8),
                    0 0 40px rgba(138, 43, 226, 0.6),
                    inset 0 0 30px rgba(138, 43, 226, 0.3);
    }
}

.rare-glow {
    animation: rareGlow 2s ease-in-out infinite;
}

/* Animation d'apparition élégante */
@keyframes elegantFadeIn {
    0% {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
        filter: blur(5px);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
        filter: blur(0);
    }
}

.elegant-fade-in {
    animation: elegantFadeIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Vibration pour notifications importantes */
@keyframes vibrate {
    0%, 100% { transform: translate(0); }
    10% { transform: translate(-2px, -1px); }
    20% { transform: translate(2px, 1px); }
    30% { transform: translate(-1px, 2px); }
    40% { transform: translate(1px, -2px); }
    50% { transform: translate(-1px, -1px); }
    60% { transform: translate(1px, 1px); }
    70% { transform: translate(-2px, 1px); }
    80% { transform: translate(2px, -1px); }
    90% { transform: translate(-1px, -2px); }
}

.vibrate {
    animation: vibrate 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97);
}

/* Effet de zoom avec rebond */
@keyframes zoomBounce {
    0% {
        transform: scale(0);
        opacity: 0;
    }
    50% {
        transform: scale(1.2);
        opacity: 1;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

.zoom-bounce {
    animation: zoomBounce 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Fishing 2.0 UI - Bulles animées */
.bubbles {
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="25" cy="25" r="5" fill="rgba(255,255,255,0.3)"/><circle cx="75" cy="75" r="8" fill="rgba(255,255,255,0.2)"/><circle cx="50" cy="10" r="4" fill="rgba(255,255,255,0.4)"/><circle cx="10" cy="60" r="6" fill="rgba(255,255,255,0.25)"/></svg>');
    background-size: 50px 50px;
    animation: bubblesUp 10s linear infinite;
}

@keyframes bubblesUp {
    from { background-position: 0 0; }
    to { background-position: 0 100%; }
}

/* Utility class pour masquer la scrollbar tout en gardant le scroll */
.no-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
}

.no-scrollbar::-webkit-scrollbar {
    display: none;  /* Chrome, Safari and Opera */
}

/* Safe area padding bottom pour les footers fixes */
.safe-area-pb {
    padding-bottom: max(16px, env(safe-area-inset-bottom, 0px));
}
/* Animations pour l'écran "Oh! ça mord!" */
@keyframes fadeInScale {
    0% {
        opacity: 0;
        transform: scale(0.8);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* --- MENU HUB V3 STYLES --- */

/* Overlay Menu */
.hub-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    /* ⚠️ Plus de transparence quand ouvert */
    background: rgba(0, 0, 0, 0.70);
    backdrop-filter: blur(8px);
    z-index: 9998;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.25s ease, visibility 0.25s ease;
    padding-bottom: calc(100px + env(safe-area-inset-bottom)); 
}

.hub-overlay.active {
    opacity: 1;
    visibility: visible;
}

.hub-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    width: 90%;
    max-width: 380px;
}

.hub-item {
    background: rgba(44, 47, 51, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 16px;
    padding: 20px;
    text-align: center;
    position: relative;
    cursor: pointer;
    transition: transform 0.1s;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}
.hub-item:active { transform: scale(0.96); }

/* Couleurs thématiques */
.hub-item.quests { border-bottom: 4px solid #10b981; }
.hub-item.inventory { border-bottom: 4px solid #3b82f6; }
.hub-item.pokedex { border-bottom: 4px solid #ef4444; }
.hub-item.shop { border-bottom: 4px solid #f59e0b; }

.hub-icon { font-size: 2.5em; margin-bottom: 5px; }
.hub-label { font-weight: bold; color: white; font-size: 1.1em; }
.hub-desc { color: #aaa; font-size: 0.8em; }

/* Notification Badge dans le Hub */
.hub-notif {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 10px;
    height: 10px;
    background: #ef4444;
    border-radius: 50%;
    box-shadow: 0 0 8px #ef4444;
}

/* Barre du Bas - Sticky */
.new-bottom-nav {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 80px;
    background: rgba(20, 20, 25, 0.98);
    border-top: 1px solid rgba(255,255,255,0.1);
    display: flex !important;
    justify-content: space-between;
    align-items: flex-start;
    padding-top: 12px;
    padding-bottom: env(safe-area-inset-bottom);
    z-index: 9000 !important; /* Au dessus de tout sauf les modales */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    /* Sticky - reste toujours visible en bas de l'écran */
    will-change: transform;
}

.nav-btn {
    background: none;
    border: none;
    color: #6b7280;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    width: 20%;
    cursor: pointer;
    position: relative;
}

.nav-btn.active { color: #FFD700; }
.nav-btn.active .nav-icon { 
    transform: translateY(-3px); 
    filter: drop-shadow(0 0 5px rgba(255,215,0,0.5)); 
}

.nav-icon { font-size: 24px; margin-bottom: 4px; transition: transform 0.2s; }
.nav-label { font-size: 10px; font-weight: 600; }

/* Bouton Central */
.nav-hub-wrapper {
    position: relative;
    width: 20%;
    display: flex;
    justify-content: center;
    pointer-events: none;
}

.nav-hub-btn {
    pointer-events: auto;
    position: absolute;
    top: -30px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    /* ⚠️ INVERSÉ : Allumé (doré) quand le menu est fermé */
    background: linear-gradient(135deg, #FFD700, #FFA500);
    border: 4px solid #B8860B;
    box-shadow: 0 -4px 10px rgba(255,215,0,0.5), 0 0 20px rgba(255,215,0,0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), background 0.3s, border-color 0.3s, box-shadow 0.3s;
    z-index: 9001;
}

.hub-icon-img {
    width: 70%;
    height: 70%;
    object-fit: contain;
}

/* ⚠️ INVERSÉ : Éteint (violet) quand le menu est ouvert */
.hub-open .nav-hub-btn {
    transform: scale(1.1) rotate(180deg);
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-color: #1a1a2e;
    box-shadow: 0 -4px 10px rgba(0,0,0,0.3);
}

/* Cacher l'ancienne nav */
.bottom-nav { display: none !important; }

/* Cacher la barre de menu pendant Poké-Poker (géré par JS) */
#poker-page.active ~ nav.new-bottom-nav,
body:has(#poker-page.active) nav.new-bottom-nav {
    display: none !important;
}
/* Pour l'expédition, la barre est gérée par JS selon l'état de runState */

/* ===== SYSTÈME NARRATIF (GDD V10.0) ===== */
.narrative-overlay {
    position: fixed;
    bottom: 80px;
    left: 50%;
    transform: translateX(-50%);
    width: 90%;
    max-width: 600px;
    z-index: 20000;
    display: flex;
    align-items: flex-end;
    pointer-events: auto;
    cursor: pointer;
}

.narrative-box {
    background: rgba(20, 20, 35, 0.95);
    border: 3px solid #7d5fff;
    border-radius: 8px;
    padding: 15px 15px 15px 80px;
    position: relative;
    pointer-events: auto;
    box-shadow: 0 0 20px rgba(125, 95, 255, 0.4);
    animation: slideUp 0.4s ease-out;
    font-family: 'VT323', monospace;
    color: white;
    font-size: 1.2em;
    line-height: 1.3;
}

.narrative-portrait {
    position: absolute;
    bottom: 10px;
    left: -10px;
    width: 100px;
    height: 100px;
    image-rendering: pixelated;
    z-index: 20001;
    filter: drop-shadow(0 0 10px rgba(0,0,0,0.5));
    animation: float 3s infinite ease-in-out;
}

.narrative-name {
    position: absolute;
    top: -12px;
    left: 80px;
    background: #7d5fff;
    color: white;
    font-weight: bold;
    padding: 2px 10px;
    border-radius: 4px;
    font-size: 0.8em;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.narrative-text {
    min-height: 40px;
}

.narrative-next {
    position: absolute;
    bottom: 10px;
    right: 10px;
    color: #FFD700;
    animation: bounce 1s infinite;
    font-size: 0.8em;
    cursor: pointer;
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

/* ===== CENTRE DE RECHERCHE (GDD V10.0) ===== */
#research-page {
    background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #16213e 100%);
    min-height: 100vh;
    padding: 20px;
}

.research-header {
    text-align: center;
    margin-bottom: 30px;
}

.research-header h1 {
    color: #a855f7;
    text-shadow: 0 0 15px rgba(168, 85, 247, 0.6);
    margin-bottom: 10px;
}

#eo-display {
    font-size: 3em;
    font-weight: bold;
    color: white;
    margin: 10px 0;
}

/* Correction du centrage du Noyau */
.crystal-core-container {
    position: relative;
    height: 200px;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 40px;
    cursor: pointer;
    /* Ajout pour s'assurer que rien ne dépasse */
    width: 100%; 
}

/* Conteneur 3D Master-Tech */
#genesis-3d-container {
    width: 300px;
    height: 300px;
    margin: 20px auto;
    position: relative;
    z-index: 10;
}

/* Lueur d'ambiance derrière la Master Ball */
#genesis-3d-container::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    height: 80%;
    background: radial-gradient(circle, rgba(168, 85, 247, 0.4) 0%, transparent 70%);
    border-radius: 50%;
    z-index: -1;
    pointer-events: none;
    animation: pulse-glow 3s infinite ease-in-out;
}

@keyframes pulse-glow {
    0%, 100% { 
        opacity: 0.5; 
        transform: translate(-50%, -50%) scale(1); 
    }
    50% { 
        opacity: 0.8; 
        transform: translate(-50%, -50%) scale(1.1); 
    }
}

.crystal-core {
    width: 128px;
    height: 128px;
    image-rendering: pixelated;
    filter: drop-shadow(0 0 20px #a855f7);
    cursor: pointer;
    transition: transform 0.1s;
}

.crystal-core:active {
    transform: scale(0.95);
}

/* Le fameux "rond vide" corrigé */
.core-pulse {
    position: absolute;
    top: 50%;        /* Placer le haut à 50% */
    left: 50%;       /* Placer la gauche à 50% */
    transform: translate(-50%, -50%); /* Recentrer parfaitement */
    width: 160px;    /* Légèrement plus grand que le noyau (128px) */
    height: 160px;
    border-radius: 50%;
    border: 2px solid rgba(168, 85, 247, 0.3);
    animation: pulse 2s infinite;
    pointer-events: none; /* Important : permet de cliquer "au travers" sur le cristal */
    z-index: 0;
}

.habitat-card {
    background: rgba(30, 30, 50, 0.8);
    border: 2px solid rgba(168, 85, 247, 0.3);
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 15px;
}

.habitat-card.unlocked {
    border-color: rgba(168, 85, 247, 0.6);
}

.habitat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.habitat-name {
    font-size: 1.2em;
    font-weight: bold;
    color: white;
}

.habitat-level {
    color: #a855f7;
    font-size: 0.9em;
}

.habitat-slots {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-top: 10px;
}

.slot {
    width: 60px;
    height: 60px;
    border: 2px dashed rgba(168, 85, 247, 0.5);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.3);
    cursor: pointer;
    transition: all 0.3s;
}

.slot:hover {
    border-color: #a855f7;
    background: rgba(168, 85, 247, 0.1);
}

.slot.filled {
    border: 2px solid #a855f7;
    background: rgba(168, 85, 247, 0.2);
}

.slot img {
    width: 50px;
    height: 50px;
    image-rendering: pixelated;
}

.habitat-upgrade-btn {
    margin-top: 10px;
    padding: 8px 16px;
    background: linear-gradient(135deg, #a855f7, #9333ea);
    border: none;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.3s;
}

.habitat-upgrade-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4);
}

.habitat-upgrade-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* ===== ONGLETS RECHERCHE ===== */
.research-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    border-bottom: 2px solid #333;
}

.research-tab {
    flex: 1;
    padding: 12px;
    background: rgba(30, 30, 50, 0.5);
    border: none;
    border-bottom: 3px solid transparent;
    color: rgba(255,255,255,0.6);
    cursor: pointer;
    font-size: 1em;
    transition: all 0.3s;
}

.research-tab.active {
    background: rgba(168, 85, 247, 0.3);
    border-bottom-color: #a855f7;
    color: white;
    font-weight: bold;
}

.research-tab:hover:not(.active) {
    background: rgba(168, 85, 247, 0.1);
    color: rgba(255,255,255,0.8);
}

/* Navigation du bas spécial Recherche */
#research-bottom-nav {
    background: rgba(15, 15, 25, 0.98) !important;
    border-top: 1px solid rgba(168, 85, 247, 0.3) !important;
    box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.8);
    padding-bottom: env(safe-area-inset-bottom);
}

/* Animation douce entre les pages */
.research-view {
    animation: fadeIn 0.3s ease-out;
}

/* Onglets du Terminal améliorés */
.research-tab {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    color: rgba(255,255,255,0.6);
    padding: 10px;
    border-radius: 8px;
    font-size: 0.9em;
    font-weight: 600;
}

.research-tab.active {
    background: rgba(168, 85, 247, 0.2);
    border-color: #a855f7;
    color: white;
    box-shadow: 0 0 15px rgba(168, 85, 247, 0.2);
}

/* ===== TERMINAL SHOP ===== */
.terminal-upgrade-card {
    background: rgba(30, 30, 50, 0.6);
    border: 2px solid #444;
    border-radius: 10px;
    padding: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 15px;
    transition: all 0.3s;
}

.terminal-upgrade-card:hover {
    border-color: #a855f7;
    background: rgba(168, 85, 247, 0.1);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(168, 85, 247, 0.2);
}

/* ===== TCG CARDS ===== */
.tcg-card {
    animation: cardAppear 0.5s ease both;
}

@keyframes cardAppear {
    from {
        opacity: 0;
        transform: scale(0.8) rotateY(180deg);
    }
    to {
        opacity: 1;
        transform: scale(1) rotateY(0deg);
    }
}

.tcg-card-select {
    transition: all 0.3s;
}

.tcg-card-select:hover {
    transform: scale(1.05) !important;
    box-shadow: 0 0 25px rgba(255, 215, 0, 0.4);
}

.mascotte-slot:hover {
    border-color: #FFD700 !important;
    background: rgba(255, 215, 0, 0.2) !important;
    transform: scale(1.05);
}

/* ===== TCG BOOSTER & CARD ANIMATIONS (Genesis Masterpiece Edition) ===== */
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Roboto+Condensed:wght@400;700&display=swap');

:root {
    --tcg-card-w: 320px;
    --tcg-card-h: 460px;
    --tcg-gold: #ffd700;
    --tcg-gold-dark: #b8860b;
    --tcg-bg: #050505;
    --tcg-type-color: #ff4500;
    --tcg-type-dark: #4a0404;
    --tcg-type-glow: rgba(255, 69, 0, 0.8);
}

/* BOOSTER DESIGN */
.tcg-booster-container {
    position: relative;
    width: 260px;
    height: 360px;
    cursor: pointer;
    transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    z-index: 20;
    filter: drop-shadow(0 20px 30px rgba(0,0,0,0.8));
    transform-style: preserve-3d;
}

.tcg-booster-container:hover {
    transform: scale(1.05) rotate(2deg) translateY(-10px);
    filter: drop-shadow(0 30px 50px var(--tcg-type-glow));
}

.tcg-booster-container.idle {
    animation: tcgFloat 4s ease-in-out infinite;
}

.tcg-booster-body {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--tcg-type-dark) 0%, var(--tcg-type-color) 50%, #240b36 100%);
    position: relative;
    clip-path: polygon(
        2% 0%, 5% 2%, 8% 0%, 11% 2%, 14% 0%, 17% 2%, 20% 0%, 23% 2%, 26% 0%, 29% 2%, 32% 0%, 35% 2%, 38% 0%, 41% 2%, 44% 0%, 47% 2%, 50% 0%, 53% 2%, 56% 0%, 59% 2%, 62% 0%, 65% 2%, 68% 0%, 71% 2%, 74% 0%, 77% 2%, 80% 0%, 83% 2%, 86% 0%, 89% 2%, 92% 0%, 95% 2%, 98% 0%, 100% 0%, 
        100% 100%, 98% 100%, 95% 98%, 92% 100%, 89% 98%, 86% 100%, 83% 98%, 80% 100%, 77% 98%, 74% 100%, 71% 98%, 68% 100%, 65% 98%, 62% 100%, 59% 98%, 56% 100%, 53% 98%, 50% 100%, 47% 98%, 44% 100%, 41% 98%, 38% 100%, 35% 98%, 32% 100%, 29% 98%, 26% 100%, 23% 98%, 20% 100%, 17% 98%, 14% 100%, 11% 98%, 8% 100%, 5% 98%, 2% 100%, 0% 100%, 0% 0%
    );
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-shadow: inset 0 0 40px rgba(0,0,0,0.6);
    border: 1px solid rgba(255,255,255,0.2);
}

.tcg-booster-foil {
    position: absolute;
    top: -50%; left: -50%; width: 200%; height: 200%;
    background: linear-gradient(115deg, transparent 20%, rgba(255,255,255,0.4) 40%, rgba(255,255,255,0.1) 50%, transparent 60%);
    pointer-events: none;
    z-index: 5;
    mix-blend-mode: overlay;
    transition: transform 0.1s;
}

.tcg-booster-art {
    width: 220px;
    height: 220px;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    border-radius: 50%;
}

.tcg-booster-pokemon-img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    filter: drop-shadow(0 10px 20px rgba(0,0,0,0.6));
    transform: scale(1.3);
    transition: transform 0.3s;
}

.tcg-booster-container:hover .tcg-booster-pokemon-img {
    transform: scale(1.4);
}

.tcg-booster-title {
    font-family: 'Cinzel', serif;
    font-size: 2.4em;
    color: #fff;
    text-transform: uppercase;
    margin-top: 15px;
    text-shadow: 0 2px 10px rgba(0,0,0,0.8);
    z-index: 2;
    letter-spacing: 2px;
    background: linear-gradient(to bottom, #fff, var(--tcg-gold));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.tcg-booster-edition {
    font-size: 0.9em;
    color: var(--tcg-gold);
    background: rgba(0,0,0,0.8);
    padding: 5px 15px;
    border-radius: 4px;
    margin-top: 5px;
    border: 1px solid var(--tcg-gold);
    z-index: 2;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: bold;
}

/* CARD DESIGN */
.tcg-card-wrapper {
    width: var(--tcg-card-w);
    height: var(--tcg-card-h);
    position: relative;
    transform-style: preserve-3d;
    display: none;
    z-index: 100;
    cursor: default;
}

.tcg-card-wrapper.flipping {
    animation: tcgFlipReveal 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.tcg-card-back {
    position: absolute;
    width: 100%; height: 100%;
    backface-visibility: hidden;
    border-radius: 18px;
    background: #1e293b;
    background-image: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
    border: 6px solid #334155;
    transform: rotateY(180deg);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    z-index: 2;
}

.tcg-pokeball-logo {
    width: 100px; height: 100px;
    border: 8px solid #e2e8f0;
    border-radius: 50%;
    background: linear-gradient(#ef4444 50%, #fff 50%);
    box-shadow: 0 5px 15px rgba(0,0,0,0.5);
    position: relative;
}

.tcg-pokeball-logo::after {
    content: ''; position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 30px; height: 30px;
    background: #fff; border: 4px solid #1e293b; border-radius: 50%;
}

.tcg-pokeball-logo::before {
    content: ''; position: absolute; top: 50%; left: 0;
    width: 100%; height: 8px; background: #1e293b;
    transform: translateY(-50%);
}

.tcg-card-front {
    position: absolute;
    width: 100%; height: 100%;
    backface-visibility: hidden;
    transform: rotateY(0deg);
    border-radius: 18px;
    overflow: hidden;
    background: #000;
    border: 2px solid var(--tcg-gold);
    box-shadow: 0 0 0 6px #1a1a1a, 0 0 0 8px var(--tcg-gold-dark), 0 0 60px var(--tcg-type-glow);
}

.tcg-external-fx-container {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 600px; height: 600px;
    pointer-events: none;
    z-index: 50;
    display: none;
}

.tcg-aura-ring {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 380px; height: 520px;
    border-radius: 50%;
    background: radial-gradient(closest-side, var(--tcg-type-glow), transparent);
    opacity: 0.5;
    filter: blur(40px);
    animation: tcgPulseAura 3s infinite alternate;
}

.tcg-fire-ring {
    position: absolute;
    top: 50%; left: 50%;
    width: 420px; height: 580px;
    transform: translate(-50%, -50%);
    border-radius: 45%;
    box-shadow: 0 0 30px #ff4500, inset 0 0 30px #ff4500;
    opacity: 0;
    animation: tcgFireRingAnim 3s infinite;
    filter: blur(8px);
}

.tcg-ember-external {
    position: absolute;
    width: 10px; height: 10px;
    background: #ffd700;
    border-radius: 50%;
    box-shadow: 0 0 15px #ff4500;
    animation: tcgEmberFloat 4s linear infinite;
}

.tcg-water-splash {
    position: absolute;
    width: 100%; height: 100%;
    background: radial-gradient(circle, transparent 30%, rgba(0, 191, 255, 0.3) 50%, transparent 70%);
    animation: tcgRipple 3s infinite;
}

.tcg-bubble-external {
    position: absolute;
    background: rgba(255, 255, 255, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    animation: tcgBubbleFloat 5s ease-in-out infinite;
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
}

.tcg-psy-orbit {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 480px; height: 480px;
    border: 2px solid rgba(255, 0, 255, 0.4);
    border-radius: 50%;
    animation: tcgSpin 10s linear infinite;
}

.tcg-psy-orbit::after {
    content: ''; position: absolute; top: -6px; left: 50%;
    width: 12px; height: 12px;
    background: #fff; border-radius: 50%;
    box-shadow: 0 0 25px #ff00ff;
}

.tcg-psy-wave-external {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 100px; height: 100px;
    border: 6px solid rgba(148, 0, 211, 0.6);
    border-radius: 50%;
    animation: tcgShockwave 3s infinite;
}

.tcg-card-background {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: radial-gradient(circle at 50% 40%, var(--tcg-type-color), #000);
    z-index: 1; opacity: 0.9;
}

.tcg-bg-fx-container, .tcg-fx-container {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    overflow: hidden; pointer-events: none;
}

.tcg-bg-fx-container { z-index: 1; }
.tcg-fx-container { z-index: 2; }

.tcg-pokemon-sprite-container {
    position: absolute;
    top: 12%; left: 0; width: 100%; height: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 5;
}

.tcg-pokemon-sprite {
    width: 220px; 
    height: 220px;
    image-rendering: pixelated; 
    object-fit: contain;
    filter: drop-shadow(0 0 30px var(--tcg-type-glow));
    animation: tcgBreathe 3s ease-in-out infinite;
    transition: transform 0.3s;
}

.tcg-pokemon-sprite.large-sprite {
    transform: scale(1.3);
    margin-top: 20px;
}

.tcg-card-header {
    position: absolute;
    top: 20px; left: 20px; right: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 10;
}

.tcg-card-name {
    font-family: 'Cinzel', serif;
    color: white;
    font-size: 1.5em;
    text-transform: uppercase;
    text-shadow: 0 2px 4px rgba(0,0,0,0.8);
    background: linear-gradient(to bottom, #fff, var(--tcg-gold));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.tcg-card-hp {
    color: var(--tcg-type-color);
    font-size: 1.3em;
    font-weight: 900;
    text-shadow: 0 2px 4px rgba(0,0,0,0.8);
}

.tcg-card-footer {
    position: absolute;
    bottom: 0; left: 0; width: 100%;
    background: linear-gradient(to top, #000 90%, transparent 100%);
    padding: 40px 20px 25px;
    z-index: 10;
    border-top: 1px solid rgba(255,255,255,0.1);
}

.tcg-ability-box {
    border: 1px solid var(--tcg-gold-dark);
    background: rgba(20,20,20,0.9);
    border-radius: 8px;
    padding: 12px;
    margin-bottom: 10px;
    backdrop-filter: blur(4px);
    box-shadow: 0 0 20px rgba(0,0,0,0.6);
    width: 100%;
}

.tcg-ability-name {
    color: var(--tcg-gold);
    font-size: 1em;
    font-weight: bold;
    text-transform: uppercase;
    margin-bottom: 6px;
    letter-spacing: 1px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.tcg-ability-text {
    color: #e2e8f0;
    font-size: 0.9em;
    line-height: 1.4;
    white-space: normal;
    overflow-wrap: break-word;
}

.tcg-rarity-icon {
    text-align: right;
    color: var(--tcg-gold);
    font-size: 1.4em;
    margin-top: 5px;
    text-shadow: 0 0 10px var(--tcg-gold);
}

.tcg-holo-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    z-index: 20; opacity: 0.5; pointer-events: none;
    mix-blend-mode: color-dodge;
    background: linear-gradient(115deg, transparent 20%, rgba(255,0,255,0.4) 40%, rgba(0,255,255,0.4) 60%, transparent 80%), repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.1) 11px, rgba(255,255,255,0.1) 15px);
    background-size: 200% 200%;
    transition: opacity 0.2s;
}

.tcg-flash {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; opacity: 0; pointer-events: none; z-index: 200;
}

/* ANIMATIONS */
@keyframes tcgFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
@keyframes tcgShakeHard { 
    0% { transform: translate(0,0) rotate(0); } 
    25% { transform: translate(-5px, 5px) rotate(-5deg); } 
    50% { transform: translate(5px, -5px) rotate(5deg); } 
    75% { transform: translate(-5px, 5px) rotate(-5deg); } 
    100% { transform: translate(0,0) rotate(0); } 
}
@keyframes tcgFlipReveal { 
    0% { transform: rotateY(180deg) scale(0.5); } 
    50% { transform: rotateY(-90deg) scale(1.2); } 
    100% { transform: rotateY(0deg) scale(1); } 
}
@keyframes tcgFlash { 0% { opacity: 0; } 10% { opacity: 1; } 100% { opacity: 0; } }
@keyframes tcgBreathe { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
@keyframes tcgFireRingAnim { 0% { transform: translate(-50%, -50%) scale(0.9); opacity: 0; } 50% { opacity: 0.6; } 100% { transform: translate(-50%, -50%) scale(1.1); opacity: 0; } }
@keyframes tcgEmberFloat { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-400px) scale(0); opacity: 0; } }
@keyframes tcgRipple { 0% { transform: scale(0.8); opacity: 0.8; } 100% { transform: scale(1.5); opacity: 0; } }
@keyframes tcgBubbleFloat { 0% { transform: translateY(0) translateX(0); opacity: 0; } 20% { opacity: 1; } 100% { transform: translateY(-300px) translateX(20px); opacity: 0; } }
@keyframes tcgShockwave { 0% { width: 100px; height: 100px; opacity: 0.8; border-width: 4px; } 100% { width: 500px; height: 500px; opacity: 0; border-width: 0px; } }
@keyframes tcgSpin { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }
@keyframes tcgPulseAura { 0% { opacity: 0.2; transform: translate(-50%, -50%) scale(0.9); } 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1.1); } }
@keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }
@keyframes floatEO {
    0% {
        opacity: 1;
        transform: translate(-50%, -50%) translateY(0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translate(-50%, -50%) translateY(-80px) scale(1.2);
    }
}

/* ===== NEWS TICKER (GDD V10.0) ===== */
.news-ticker-container {
    background: rgba(20, 20, 35, 0.9);
    border: 2px solid #7d5fff;
    border-radius: 8px;
    padding: 10px 15px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    overflow: hidden;
    position: relative;
}

.news-ticker-label {
    font-size: 1.5em;
    flex-shrink: 0;
    animation: pulse 2s infinite;
}

.news-ticker-text {
    color: #a855f7;
    font-family: 'VT323', monospace;
    font-size: 1.1em;
    white-space: nowrap;
    position: relative;
    display: inline-block;
    width: auto;
    min-width: 100%;
}

.news-ticker-container {
    overflow: hidden;
    position: relative;
}

/* Wrapper pour le texte qui permet le défilement */
.news-ticker-text-wrapper {
    flex: 1;
    overflow: hidden;
    position: relative;
    min-width: 0;
}

.news-ticker-text.animated {
    animation: ticker-scroll linear infinite;
    padding-left: 100%;
    display: inline-block;
    will-change: transform;
}

@keyframes ticker-scroll {
    0% { 
        transform: translateX(0); 
    }
    100% { 
        transform: translateX(calc(-100% - 100%)); 
    }
}

/* ===== NOYAU GENESIS (Tech/Cyber) ===== */
.genesis-core {
    width: 128px;
    height: 128px;
    position: relative;
    z-index: 1; /* S'assure que le cristal est au-dessus du cercle */
    cursor: pointer;
    filter: drop-shadow(0 0 20px #a855f7);
}

.core-inner {
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at 30% 30%, rgba(168, 85, 247, 0.8), rgba(125, 95, 255, 0.6), rgba(59, 130, 246, 0.4));
    border-radius: 50%;
    position: relative;
    animation: core-rotate 3s linear infinite;
    box-shadow: 
        inset 0 0 30px rgba(168, 85, 247, 0.5),
        0 0 40px rgba(168, 85, 247, 0.4),
        0 0 60px rgba(59, 130, 246, 0.3);
}

.core-inner::before {
    content: '';
    position: absolute;
    top: 20%;
    left: 20%;
    width: 60%;
    height: 60%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent);
    border-radius: 50%;
    animation: core-pulse-inner 2s ease-in-out infinite;
}

.core-inner::after {
    content: '⚡';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3em;
    filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.8));
    animation: core-icon-pulse 1.5s ease-in-out infinite;
}

.core-glow {
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
    background: radial-gradient(circle, rgba(168, 85, 247, 0.3), transparent);
    border-radius: 50%;
    animation: core-glow-pulse 2s ease-in-out infinite;
    z-index: -1;
}

@keyframes core-rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes core-pulse-inner {
    0%, 100% { transform: scale(1); opacity: 0.5; }
    50% { transform: scale(1.2); opacity: 0.8; }
}

@keyframes core-icon-pulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.1); }
}

@keyframes core-glow-pulse {
    0%, 100% { opacity: 0.3; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(1.1); }
}

/* ===== FX PORYGON GLITCH ===== */
.narrative-portrait.glitch {
    animation: glitch-effect 0.3s infinite;
    filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)) hue-rotate(90deg);
}

.narrative-portrait.glitch-error {
    animation: glitch-error 0.5s infinite;
    filter: drop-shadow(0 0 10px rgba(255,0,0,0.5)) hue-rotate(180deg) saturate(2);
}

@keyframes glitch-effect {
    0%, 100% { 
        transform: translate(0, 0);
        filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)) hue-rotate(0deg);
    }
    20% { 
        transform: translate(-2px, 2px);
        filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)) hue-rotate(90deg);
    }
    40% { 
        transform: translate(2px, -2px);
        filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)) hue-rotate(180deg);
    }
    60% { 
        transform: translate(-2px, -2px);
        filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)) hue-rotate(270deg);
    }
    80% { 
        transform: translate(2px, 2px);
        filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)) hue-rotate(360deg);
    }
}

@keyframes glitch-error {
    0%, 100% { 
        transform: translate(0, 0) scale(1);
        filter: drop-shadow(0 0 10px rgba(255,0,0,0.5)) hue-rotate(0deg);
    }
    10% { 
        transform: translate(-3px, 3px) scale(1.05);
        filter: drop-shadow(0 0 15px rgba(255,0,0,0.7)) hue-rotate(90deg) saturate(2);
    }
    20% { 
        transform: translate(3px, -3px) scale(0.95);
        filter: drop-shadow(0 0 20px rgba(255,0,0,0.9)) hue-rotate(180deg) saturate(3);
    }
    30% { 
        transform: translate(-3px, -3px) scale(1.1);
        filter: drop-shadow(0 0 15px rgba(255,0,0,0.7)) hue-rotate(270deg) saturate(2);
    }
    40% { 
        transform: translate(3px, 3px) scale(0.9);
        filter: drop-shadow(0 0 10px rgba(255,0,0,0.5)) hue-rotate(360deg);
    }
    50% { 
        transform: translate(0, 0) scale(1);
        filter: drop-shadow(0 0 10px rgba(255,0,0,0.5)) hue-rotate(0deg);
    }
}

/* ===== GENESIS REBOOT - ANIMATIONS PORYGON ===== */

@keyframes glitch {
    0%, 100% {
        transform: translate(0);
        filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.8));
    }
    20% {
        transform: translate(-2px, 2px);
        filter: drop-shadow(0 0 10px rgba(0, 255, 0, 0.8));
    }
    40% {
        transform: translate(-2px, -2px);
        filter: drop-shadow(0 0 10px rgba(0, 0, 255, 0.8));
    }
    60% {
        transform: translate(2px, 2px);
        filter: drop-shadow(0 0 10px rgba(255, 255, 0, 0.8));
    }
    80% {
        transform: translate(2px, -2px);
        filter: drop-shadow(0 0 10px rgba(255, 0, 255, 0.8));
    }
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
}

@keyframes pulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.1); opacity: 0.9; }
}

@keyframes flash {
    0%, 100% { opacity: 1; filter: brightness(1); }
    50% { opacity: 0.3; filter: brightness(3); }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeOut {
    from { opacity: 1; transform: translateY(0); }
    to { opacity: 0; transform: translateY(10px); }
}

/* ===== SÉQUENCE D'INTRODUCTION "PROFESSOR GLITCH" ===== */

/* Conteneur principal de l'intro */
#intro-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 50000;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.8s ease, all 0.5s ease; /* ✅ CORRECTION : Transition progressive pour le fond */
}

/* Mode Rétro (Phase A) */
#intro-overlay.mode-retro {
    background: #f8f8f8;
    font-family: 'Press Start 2P', 'Courier New', monospace;
    transition: background 0.8s ease; /* ✅ CORRECTION : Transition progressive */
}

#intro-overlay.mode-retro .intro-dialog {
    background: white;
    border: 4px solid black;
    color: black;
    padding: 30px;
    border-radius: 0;
    max-width: 600px;
    width: 90%;
    box-shadow: 8px 8px 0 rgba(0,0,0,0.2);
}

#intro-overlay.mode-retro .intro-character {
    filter: none;
    image-rendering: pixelated;
}

/* Mode Glitch (Phase B) */
#intro-overlay.mode-glitch {
    background: #f8f8f8;
    font-family: 'Courier New', monospace;
    animation: glitch-flicker 0.1s infinite;
    transition: background 0.8s ease; /* ✅ CORRECTION : Transition progressive */
}

#intro-overlay.mode-glitch .intro-dialog {
    background: white;
    border: 4px solid black;
    color: black;
    padding: 30px;
    border-radius: 0;
    max-width: 600px;
    width: 90%;
    animation: glitch-shake 0.2s infinite;
    filter: hue-rotate(90deg) contrast(1.2);
}

#intro-overlay.mode-glitch .intro-character {
    animation: glitch-shake 0.15s infinite;
    filter: hue-rotate(90deg) invert(0.3);
    image-rendering: pixelated;
}

/* Mode Porygon (Phase C) */
#intro-overlay.mode-porygon {
    background: #1a1a2e;
    font-family: 'VT323', 'Courier New', monospace;
    transition: background 0.8s ease; /* ✅ CORRECTION : Transition progressive */
}

#intro-overlay.mode-porygon .intro-dialog {
    background: rgba(20, 20, 35, 0.95);
    border: 3px solid #a855f7;
    color: white;
    padding: 30px;
    border-radius: 20px;
    max-width: 600px;
    width: 90%;
    box-shadow: 0 0 30px rgba(168, 85, 247, 0.5);
}

#intro-overlay.mode-porygon .intro-character {
    filter: drop-shadow(0 0 10px rgba(168, 85, 247, 0.8));
    image-rendering: pixelated;
}

/* Animations */
@keyframes glitch-flicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.95; }
}

@keyframes glitch-shake {
    0%, 100% { transform: translate(0); }
    10% { transform: translate(-2px, 2px); }
    20% { transform: translate(2px, -2px); }
    30% { transform: translate(-2px, -2px); }
    40% { transform: translate(2px, 2px); }
    50% { transform: translate(-1px, 1px); }
    60% { transform: translate(1px, -1px); }
    70% { transform: translate(-1px, -1px); }
    80% { transform: translate(1px, 1px); }
    90% { transform: translate(0); }
}

@keyframes typewriter {
    from { width: 0; }
    to { width: 100%; }
}

@keyframes blink-cursor {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

.intro-text {
    overflow: hidden;
    white-space: nowrap;
    border-right: 2px solid;
    animation: typewriter 2s steps(40, end), blink-cursor 0.75s step-end infinite;
}

.intro-arrow {
    animation: bounce 2s infinite;
    cursor: pointer;
    font-size: 20px !important; /* ✅ CORRECTION : Taille fixe pour éviter le triangle géant */
    margin-top: 20px;
    display: inline-block;
}

/* ===== NOUVELLE SÉQUENCE D'INTRODUCTION MOBILE FIRST ===== */

:root {
    --retro-bg: #f8f8f8;
    --retro-text: #202020;
    --retro-border: #202020;
    --porygon-bg: #050508;
    --porygon-accent: #ff0055;
    --porygon-secondary: #20d5d2;
    --term-green: #00ff00;
}

/* --- BASE RESET & MOBILE LAYOUT --- */
#game-boy-screen {
    width: 100vw; /* ✅ CORRECTION : Fullscreen */
    height: 100vh;
    height: 100dvh; /* Support mobile moderne */
    background: var(--retro-bg);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: 0;
    overflow: hidden;
    box-shadow: none;
    display: flex;
    flex-direction: column;
    z-index: 50000;
}

/* --- START SCREEN --- */
#start-screen {
    position: absolute;
    inset: 0;
    background: #222;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 100;
    color: white;
    padding: 20px;
}

#start-screen h1 {
    color: #FFDE00;
    text-shadow: 4px 4px #3B4CCA;
    text-align: center;
    font-size: clamp(20px, 6vw, 32px); /* Responsive font */
    line-height: 1.5;
    margin-bottom: 40px;
    font-family: 'Press Start 2P', monospace;
}

.start-btn {
    padding: 15px 30px;
    font-family: 'Press Start 2P', monospace;
    font-size: clamp(12px, 4vw, 16px);
    background: #ffcb05;
    color: #3b4cca;
    border: 4px solid #3b4cca;
    cursor: pointer;
    box-shadow: 4px 4px 0px #000;
    touch-action: manipulation; /* Optimisation tactile */
}

.start-btn:active { 
    transform: translate(2px, 2px); 
    box-shadow: 2px 2px 0px #000; 
}

/* --- SCÈNE RETRO (CHEN) --- */
.scene-retro {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center; /* Centré verticalement */
    background: #E0F8CF;
    transition: filter 0.1s;
}

/* Conteneur Flexible pour les Sprites */
.actors-container {
    display: flex;
    align-items: flex-end;
    justify-content: center;
    height: 35%; /* Hauteur relative à l'écran */
    width: 100%;
    position: relative;
    margin-bottom: 5vh; /* Espace avant le dialogue */
}

/* Sprite Chen Responsive */
.prof-sprite {
    width: 45vw; /* Largeur relative mobile */
    max-width: 200px; /* Max desktop */
    height: auto;
    image-rendering: pixelated;
    position: relative;
    z-index: 10;
    transition: transform 0.3s ease;
}

/* Décalage responsive lors de l'appel du Pokémon */
.prof-sprite.slide-left {
    transform: translateX(-15vw); /* Recule de 15% de l'écran */
}

@media (min-width: 600px) {
    .prof-sprite.slide-left { transform: translateX(-80px); }
}

.prof-fallback { 
    font-size: 80px; 
    display: none; 
}

/* --- POKEMON INTRO ANIMATION --- */
.intro-pokemon-container {
    position: absolute;
    left: 50%;
    bottom: 0;
    width: 0; 
    height: 0;
    display: none;
    align-items: flex-end;
    justify-content: center;
    z-index: 15;
}

.intro-pokemon-container.active {
    display: flex;
    width: 40vw; /* Taille relative mobile */
    max-width: 160px;
    height: auto;
    transform: translateX(5vw); /* Apparaît légèrement à droite */
}

.pokeball-throw {
    width: 30px; 
    height: 30px;
    background-image: url('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png');
    background-size: cover;
    image-rendering: pixelated;
    position: absolute;
    bottom: 20px;
    animation: throw-arc 0.5s linear forwards;
}

/* Sprite Pokémon (Gengar) Responsive */
.pokemon-intro-sprite {
    width: 100%; /* Prend la largeur du conteneur */
    height: auto;
    image-rendering: pixelated;
    opacity: 0;
    transform: scale(0);
    filter: brightness(0);
}

.pokemon-intro-sprite.appear {
    animation: poof-appear 0.4s ease-out 0.5s forwards;
}

.flash-effect {
    position: absolute;
    width: 200px; 
    height: 200px;
    background: radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 70%);
    opacity: 0;
    transform: scale(0);
    pointer-events: none;
    bottom: 20px;
}

.flash-effect.trigger {
    animation: flash-burst 0.3s ease-out 0.45s;
}

/* --- DIALOGUES RESPONSIVE --- */
.dialog-container {
    position: absolute;
    bottom: 20px;
    left: 5%;
    width: 90%;
    height: 30%; /* Hauteur relative (env 1/3 écran) */
    max-height: 150px;
    z-index: 20;
}

.dialog-box-retro {
    width: 100%;
    height: 100%;
    border: 4px solid var(--retro-border);
    background: white;
    border-radius: 4px;
    padding: 15px;
    box-sizing: border-box;
    font-size: clamp(10px, 3vw, 14px); /* ✅ CORRECTION : Texte plus petit pour mobile */
    line-height: 1.8; /* ✅ CORRECTION : Espacement augmenté pour lisibilité */
    color: var(--retro-text);
    box-shadow: 4px 4px 0 rgba(0,0,0,0.2);
    overflow-y: hidden; /* Pas de scroll */
    font-family: 'Press Start 2P', monospace !important; /* ✅ CORRECTION : Police standard Pokémon */
    letter-spacing: 0.5px;
}

.next-arrow {
    position: absolute;
    bottom: 10px;
    right: 10px;
    animation: bounce 1s infinite;
    display: none;
    color: #d32f2f;
    font-size: 20px;
}

/* --- TERMINAL & PORYGON (MOBILE OPTIMIZED) --- */
#terminal-screen {
    position: absolute;
    inset: 0;
    background: #000;
    color: var(--term-green);
    font-family: 'VT323', monospace;
    font-size: clamp(16px, 4vw, 24px);
    padding: 20px;
    display: none;
    flex-direction: column;
    justify-content: flex-start;
    z-index: 60;
    text-shadow: 0 0 5px var(--term-green);
    overflow-y: auto;
}

.terminal-line {
    margin-bottom: 5px;
    opacity: 0;
    animation: fade-in-line 0.1s forwards;
    word-break: break-all; /* Empêche débordement horizontal */
}

#porygon-scene {
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at center, #1a1a2e 0%, #000 120%);
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 70;
    font-family: 'Rajdhani', sans-serif;
    overflow: hidden;
    padding: 20px;
}

.cyber-grid {
    position: absolute;
    width: 200%; 
    height: 200%;
    background-image: 
        linear-gradient(rgba(32, 213, 210, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(32, 213, 210, 0.1) 1px, transparent 1px);
    background-size: 40px 40px;
    transform: perspective(300px) rotateX(60deg) translateY(-100px) translateZ(-200px);
    animation: grid-move 20s linear infinite;
    opacity: 0.4;
}

.porygon-sprite {
    width: 60vw;
    max-width: 250px;
    height: auto;
    image-rendering: pixelated;
    filter: drop-shadow(0 0 10px rgba(32, 213, 210, 0.6));
    animation: float 4s ease-in-out infinite;
    z-index: 5;
    position: relative;
    margin-bottom: 20px;
    transition: filter 0.5s ease, opacity 0.5s ease, transform 0.5s ease;
}

/* ===== ARCHITECTURE V7.0 GENESIS - ÉVOLUTION VISUELLE DE PORYGON ===== */
/* Phase 1: Boot (Niv 1-4) - Critique (<10%) */
.porygon-phase-boot {
    filter: drop-shadow(0 0 10px rgba(255, 0, 255, 0.8)) 
            brightness(0.7) 
            contrast(1.5)
            hue-rotate(180deg);
    opacity: 0.6;
    animation: float 4s ease-in-out infinite, porygonGlitch 2s infinite;
}

/* Phase 2: Stabilisation (Niv 5-14) - Instable (10-40%) */
.porygon-phase-stabilization {
    filter: drop-shadow(0 0 10px rgba(0, 255, 255, 0.6)) 
            brightness(0.85) 
            contrast(1.2);
    opacity: 0.8;
    animation: float 4s ease-in-out infinite, porygonWireframe 3s infinite;
}

/* Phase 3: Récupération (Niv 15-29) - Stable (40-80%) */
.porygon-phase-recovery {
    filter: drop-shadow(0 0 15px rgba(32, 213, 210, 0.8)) 
            brightness(1.0) 
            contrast(1.0);
    opacity: 1.0;
    animation: float 4s ease-in-out infinite;
}

/* Phase 4: Corruption (Niv 30+) - Compromis */
.porygon-phase-corruption {
    filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.6)) 
            brightness(0.9) 
            contrast(1.3)
            hue-rotate(90deg);
    opacity: 0.9;
    animation: float 4s ease-in-out infinite, porygonCorruption 1.5s infinite;
}

@keyframes porygonGlitch {
    0%, 100% { transform: translate(0, 0); }
    25% { transform: translate(-2px, 2px); filter: hue-rotate(180deg); }
    50% { transform: translate(2px, -2px); filter: hue-rotate(360deg); }
    75% { transform: translate(-2px, -2px); filter: hue-rotate(270deg); }
}

@keyframes porygonWireframe {
    0%, 100% { opacity: 0.8; }
    50% { opacity: 0.6; filter: brightness(0.7); }
}

@keyframes porygonCorruption {
    0%, 100% { filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.6)) brightness(0.9); }
    50% { filter: drop-shadow(0 0 20px rgba(255, 0, 0, 0.9)) brightness(0.7) contrast(1.5); }
}

/* ===== SYSTEM LOG (Murmures d'Entropie) ===== */
.system-log {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    position: fixed;
    bottom: 20px;
    left: 20px;
    width: 300px;
    max-width: calc(100vw - 40px);
    max-height: 200px;
    overflow-y: auto;
    z-index: 1000;
    pointer-events: none;
    font-family: 'VT323', 'Courier New', monospace;
    font-size: 12px;
    line-height: 1.4;
}

.system-log-entry {
    background: rgba(0, 0, 0, 0.85);
    border-left: 3px solid #00ff00;
    color: #00ff00;
    padding: 8px 12px;
    margin-bottom: 5px;
    border-radius: 0 4px 4px 0;
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.2);
    animation: logEntryFadeIn 0.3s ease, logEntryFadeOut 0.3s ease 4.7s forwards;
    text-shadow: 0 0 5px #00ff00;
    word-wrap: break-word;
}

@keyframes logEntryFadeIn {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes logEntryFadeOut {
    from {
        opacity: 1;
        transform: translateX(0);
    }
    to {
        opacity: 0;
        transform: translateX(-20px);
    }
}

.porygon-ui {
    width: 100%;
    max-width: 500px;
    z-index: 10;
}

.porygon-dialog-box {
    background: rgba(10, 15, 25, 0.85);
    border: 1px solid var(--porygon-secondary);
    border-left: 4px solid var(--porygon-secondary);
    color: #e0e0e0;
    padding: 15px;
    font-family: 'VT323', monospace !important; /* ✅ CORRECTION : Police standard Pokémon */
    font-size: clamp(18px, 4vw, 24px); /* ✅ CORRECTION : Taille augmentée pour lisibilité */
    font-weight: normal;
    line-height: 1.6;
    border-radius: 0 10px 10px 0;
    box-shadow: 0 0 20px rgba(32, 213, 210, 0.1);
    position: relative;
    backdrop-filter: blur(5px);
    min-height: 80px;
    letter-spacing: 1px;
}

.porygon-dialog-box::before {
    content: "SYS_OVERRIDE";
    position: absolute;
    top: -20px; 
    left: 0;
    font-size: 10px;
    color: var(--porygon-secondary);
    letter-spacing: 2px;
    font-weight: bold;
    background: rgba(0,0,0,0.8);
    padding: 2px 5px;
}

/* --- FORMULAIRE FINAL --- */
.user-input-container {
    display: none;
    margin-top: 20px;
    width: 100%;
    animation: slide-up 0.5s ease-out;
}

.input-wrapper {
    display: flex;
    flex-direction: column; /* Stack sur mobile */
    gap: 10px;
    align-items: center;
}

@media (min-width: 500px) {
    .input-wrapper { flex-direction: row; } /* Row sur desktop */
}

.login-input {
    width: 100%;
    padding: 12px;
    background: rgba(0,0,0,0.5);
    border: 1px solid var(--porygon-secondary);
    color: white;
    font-family: 'Rajdhani', sans-serif;
    font-size: 16px; /* Empêche zoom auto iOS */
    outline: none;
    box-sizing: border-box;
}

.login-btn {
    width: 100%;
    padding: 12px 20px;
    background: var(--porygon-secondary);
    color: black;
    border: none;
    font-family: 'Rajdhani', sans-serif;
    font-weight: bold;
    font-size: 16px;
    cursor: pointer;
    text-transform: uppercase;
    box-sizing: border-box;
}

/* --- ANIMATIONS KEYFRAMES --- */
@keyframes float { 
    0%, 100% { transform: translateY(0); } 
    50% { transform: translateY(-20px); } 
}

@keyframes grid-move { 
    0% { background-position: 0 0; } 
    100% { background-position: 0 500px; } 
}

@keyframes slide-up { 
    from { opacity: 0; transform: translateY(20px); } 
    to { opacity: 1; transform: translateY(0); } 
}

@keyframes fade-in-line { 
    from { opacity: 0; transform: translateX(-10px); } 
    to { opacity: 1; transform: translateX(0); } 
}

@keyframes throw-arc {
    0% { transform: translate(-30px, 30px) scale(0.5); opacity: 0; }
    10% { opacity: 1; }
    50% { transform: translate(0px, -40px) scale(0.8); }
    100% { transform: translate(15px, 0px) scale(0); opacity: 0; }
}

@keyframes poof-appear {
    0% { transform: scale(0); opacity: 0; filter: brightness(10); }
    50% { transform: scale(1.1); opacity: 1; filter: brightness(2); }
    100% { transform: scale(1); opacity: 1; filter: brightness(1); }
}

@keyframes flash-burst {
    0% { transform: scale(0); opacity: 1; }
    50% { transform: scale(2); opacity: 0.8; }
    100% { transform: scale(3); opacity: 0; }
}

/* Glitch Effects */
.glitch-active .scene-retro { 
    animation: glitch-bg 0.2s infinite; 
    filter: hue-rotate(90deg) contrast(2); 
}

.glitch-active .prof-sprite { 
    animation: glitch-sprite 0.15s infinite steps(2); 
    filter: invert(1); 
}

@keyframes glitch-bg {
    0% { transform: translate(0); background-color: #E0F8CF; }
    20% { transform: translate(-5px, 5px); background-color: #ff00ff; }
    60% { transform: translate(5px, 5px); }
    100% { transform: translate(0); background-color: #E0F8CF; }
}

@keyframes glitch-sprite {
    0% { clip-path: inset(0 0 0 0); }
    20% { transform: scale(1.1) skew(10deg); clip-path: inset(10% 0 0 0); }
    60% { transform: scale(1.1) skew(5deg); clip-path: inset(0 30% 0 0); }
    100% { clip-path: inset(0 0 0 0); }
}

.scene-retro.blackout { 
    background: black !important; 
}

#game-boy-screen .hidden { 
    display: none !important; 
}

#game-boy-screen .scanlines {
    position: absolute;
    top: 0; 
    left: 0; 
    right: 0; 
    bottom: 0;
    background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
    background-size: 100% 2px, 3px 100%;
    pointer-events: none;
    z-index: 999;
}

/* ===== POLISHING : NIVEAUX DE GLITCH (Progression visuelle) ===== */

/* Glitch "CRITIQUE" (Niveau 1 - Boot) - Glitch Fort avec cycle intermittent */
body.system-critical {
    animation: glitch-cycle 4s infinite;
    filter: contrast(120%) hue-rotate(90deg) saturate(1.3);
}

body.system-critical .app-container {
    animation: glitch-cycle 4s infinite;
    filter: contrast(120%) hue-rotate(90deg);
}

/* Cycle de glitch : 1-2 secondes normal, puis 1-2 secondes de glitch */
@keyframes glitch-cycle {
    /* État normal (0-50% = 2 secondes) */
    0%, 50% {
        transform: translate(0);
        filter: hue-rotate(0deg);
    }
    /* Phase de glitch active (50-100% = 2 secondes) avec variations */
    50.1% {
        transform: translate(-2px, 2px);
        filter: hue-rotate(90deg);
    }
    55% {
        transform: translate(2px, -2px);
        filter: hue-rotate(180deg);
    }
    60% {
        transform: translate(-2px, -2px);
        filter: hue-rotate(270deg);
    }
    65% {
        transform: translate(2px, 2px);
        filter: hue-rotate(360deg);
    }
    70% {
        transform: translate(-1px, 1px);
        filter: hue-rotate(45deg);
    }
    75% {
        transform: translate(1px, -1px);
        filter: hue-rotate(135deg);
    }
    80% {
        transform: translate(-2px, 2px);
        filter: hue-rotate(225deg);
    }
    85% {
        transform: translate(2px, -2px);
        filter: hue-rotate(315deg);
    }
    90% {
        transform: translate(-1px, -1px);
        filter: hue-rotate(90deg);
    }
    95% {
        transform: translate(1px, 1px);
        filter: hue-rotate(180deg);
    }
    /* Retour à normal (98-100%) */
    98%, 100% {
        transform: translate(0);
        filter: hue-rotate(0deg);
    }
}

/* Animation de glitch détaillée pour la phase active */
@keyframes glitch-anim {
    0%, 100% {
        transform: translate(0);
        filter: hue-rotate(0deg);
    }
    10% {
        transform: translate(-2px, 2px);
        filter: hue-rotate(90deg);
    }
    20% {
        transform: translate(2px, -2px);
        filter: hue-rotate(180deg);
    }
    30% {
        transform: translate(-2px, -2px);
        filter: hue-rotate(270deg);
    }
    40% {
        transform: translate(2px, 2px);
        filter: hue-rotate(360deg);
    }
}

/* Glitch "INSTABLE" (Niveau 2-4) - Glitch Moyen */
body.system-unstable {
    animation: none; /* Pas d'animation sur le body */
    filter: sepia(30%) hue-rotate(-15deg) contrast(1.15);
}

body.system-unstable .app-container {
    animation: none;
    filter: sepia(20%) hue-rotate(-10deg);
}

body.system-unstable .porygon-widget {
    animation: glitch-anim-slow 2s infinite;
}

@keyframes glitch-anim-slow {
    0%, 100% {
        transform: translate(0);
        filter: hue-rotate(0deg);
    }
    50% {
        transform: translate(-1px, 1px);
        filter: hue-rotate(45deg);
    }
}

/* Glitch "STABLE" (Niveau 5-9) - Glitch Léger */
body.system-stable {
    animation: none;
    filter: sepia(10%) contrast(1.05);
}

body.system-stable .app-container {
    animation: none;
    filter: none;
}

/* Glitch "OPTIMISÉ" (Niveau 10+) - Presque propre */
body.system-optimized {
    animation: none;
    filter: none;
}

body.system-optimized .app-container {
    animation: none;
    filter: none;
}

/* Glitch "AVANCÉ" (Niveau 12+) - Interface propre */
body.system-advanced {
    animation: none;
    filter: none;
}

body.system-advanced .app-container {
    animation: none;
    filter: none;
}

/* ===== POLISHING VISUEL - AMÉLIORATIONS PROFESSIONNELLES ===== */

/* 1. TYPOGRAPHIE HIÉRARCHIQUE */
/* Police tech moderne pour l'UI */
body, .ui-text, button, .btn, input, select, textarea {
    font-family: var(--font-family-tech);
    font-weight: 500;
    letter-spacing: 0.02em;
}

/* Police pixel pour Porygon et éléments glitch */
.porygon-text, .glitch-text, .system-critical, .pixel-font {
    font-family: var(--font-family-pixel);
    font-weight: 400;
    letter-spacing: 0.05em;
}

/* Hiérarchie des titres */
h1, h2, h3 {
    font-family: var(--font-family-tech);
    font-weight: 700;
    letter-spacing: 0.03em;
}

/* 2. SPRITES POKÉMON - Rendu pixelisé parfait */
.pokemon-sprite, 
.card-image, 
img[src*="generation-v/black-white/animated"],
img[src*="sprites/pokemon"],
.pokemon-sprite img,
.card-image img {
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
    image-rendering: -webkit-optimize-contrast;
    /* Assurer que les sprites ne sont pas flous */
    -ms-interpolation-mode: nearest-neighbor;
    object-fit: contain;
    object-position: center;
}

/* Artworks HD pour les écrans de récompense */
.pokemon-artwork, 
.reward-sprite,
.boss-sprite {
    image-rendering: auto;
    image-rendering: -webkit-optimize-contrast;
    object-fit: contain;
    object-position: center;
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
}

/* 3. EFFET GLITCH PORYGON - Aberration chromatique */
/* POLISHING : Widget Porygon SUPPRIMÉ - Caché par défaut (le losange flottant) */
.porygon-widget {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
    position: fixed;
    bottom: -9999px;
    right: -9999px;
    z-index: -1;
}

.porygon-bubble {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* 3. EFFET GLITCH PORYGON - Aberration chromatique (pour les modales) */
/* POLISHING : Widget Porygon SUPPRIMÉ - Caché par défaut */
.porygon-widget {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
    position: fixed;
    bottom: -9999px;
    right: -9999px;
    z-index: -1;
}

.porygon-widget.active {
    animation: porygonGlitch 0.5s infinite;
}

@keyframes porygonGlitch {
    0%, 100% {
        filter: drop-shadow(0 0 10px rgba(125, 95, 255, 0.8));
        transform: translate(0, 0);
    }
    25% {
        filter: drop-shadow(-2px 0 0 rgba(255, 0, 0, 0.8)) drop-shadow(2px 0 0 rgba(0, 255, 255, 0.8));
        transform: translate(-1px, 1px);
    }
    50% {
        filter: drop-shadow(2px 0 0 rgba(255, 0, 0, 0.8)) drop-shadow(-2px 0 0 rgba(0, 255, 255, 0.8));
        transform: translate(1px, -1px);
    }
    75% {
        filter: drop-shadow(0 -2px 0 rgba(255, 0, 0, 0.8)) drop-shadow(0 2px 0 rgba(0, 255, 255, 0.8));
        transform: translate(-1px, -1px);
    }
}

/* Aberration chromatique sur les textes Porygon */
.porygon-bubble, .glitch-text {
    position: relative;
    animation: chromaticAberration 0.1s infinite;
}

@keyframes chromaticAberration {
    0%, 100% {
        text-shadow: 
            0 0 2px rgba(255, 0, 0, 0.5),
            0 0 4px rgba(0, 255, 255, 0.5);
    }
    50% {
        text-shadow: 
            -1px 0 2px rgba(255, 0, 0, 0.8),
            1px 0 2px rgba(0, 255, 255, 0.8);
    }
}

/* Animation de flottement pour Porygon-Z */
@keyframes porygonFloat {
    0%, 100% {
        transform: translateY(0px);
    }
    50% {
        transform: translateY(-15px);
    }
}

/* Animation d'apparition de la bulle */
@keyframes bubbleAppear {
    0% {
        opacity: 0;
        transform: scale(0.8) translateY(10px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Animation de rebond pour l'indicateur de continuation */
@keyframes bounce {
    0%, 100% {
        transform: translateY(0);
        opacity: 0.6;
    }
    50% {
        transform: translateY(-5px);
        opacity: 1;
    }
}

/* Animation de secousse de Pokéball lors de la capture */
@keyframes pokeballShake {
    0%, 100% {
        transform: translate(-50%, -50%) rotate(0deg);
    }
    25% {
        transform: translate(-50%, -50%) rotate(-10deg);
    }
    75% {
        transform: translate(-50%, -50%) rotate(10deg);
    }
}

/* 4. PARTICULES AU CLIC - Game Feel */
.click-particles {
    position: fixed;
    pointer-events: none;
    z-index: 9999;
}

.click-particle {
    position: absolute;
    width: 6px;
    height: 6px;
    background: radial-gradient(circle, rgba(125, 95, 255, 1), rgba(125, 95, 255, 0));
    border-radius: 50%;
    animation: particleFloat 0.6s ease-out forwards;
    box-shadow: 0 0 10px rgba(125, 95, 255, 0.8);
}

@keyframes particleFloat {
    0% {
        opacity: 1;
        transform: translate(0, 0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translate(var(--particle-x, 0), var(--particle-y, -50px)) scale(0);
    }
}

/* 5. SYSTÈME DE REMPLACEMENT D'EMOJIS PAR ICÔNES */
/* Préparer le système pour remplacer les emojis par des icônes SVG/pixel art */
.item-icon, .resource-icon {
    display: inline-block;
    width: 24px;
    height: 24px;
    vertical-align: middle;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
}

/* Fallback : Si l'icône n'existe pas, utiliser l'emoji mais stylisé */
.item-icon::before {
    content: attr(data-emoji);
    font-size: 20px;
    display: block;
    text-align: center;
    line-height: 24px;
}

/* 6. BOUTONS - Amélioration supplémentaire */
.btn--primary, .btn--secondary {
    font-family: var(--font-family-tech);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.btn--primary:hover, .btn--secondary:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15), 0 3px 5px rgba(0, 0, 0, 0.1);
}

/* 7. BACKGROUNDS DYNAMIQUES - Particules flottantes */
.dynamic-background {
    position: relative;
    overflow: hidden;
}

.dynamic-background::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(circle at 20% 30%, rgba(125, 95, 255, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(32, 213, 210, 0.1) 0%, transparent 50%);
    animation: backgroundFloat 20s ease-in-out infinite;
    pointer-events: none;
    z-index: 0;
}

@keyframes backgroundFloat {
    0%, 100% {
        transform: translate(0, 0) scale(1);
    }
    50% {
        transform: translate(20px, -20px) scale(1.1);
    }
}

/* 8. BORDURES DÉCORÉES - Style RPG */
.modal, .card, .stat-card {
    position: relative;
    border: 2px solid;
    border-image: linear-gradient(135deg, rgba(125, 95, 255, 0.5), rgba(32, 213, 210, 0.5)) 1;
    border-radius: var(--radius-lg);
}

/* Effet de bordure rétro pour les cartes importantes */
.card-premium, .modal-premium {
    border: 3px solid;
    border-image: 
        linear-gradient(135deg, 
            rgba(255, 215, 0, 0.8) 0%, 
            rgba(255, 165, 0, 0.8) 50%, 
            rgba(255, 215, 0, 0.8) 100%
        ) 1;
    box-shadow: 
        0 0 20px rgba(255, 215, 0, 0.3),
        inset 0 0 20px rgba(255, 215, 0, 0.1);
}

/* 9. AMÉLIORATION DES MODALES */
.modal {
    backdrop-filter: blur(10px);
    background: rgba(20, 20, 35, 0.95);
    border: 2px solid rgba(125, 95, 255, 0.3);
    box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.5),
        inset 0 0 40px rgba(125, 95, 255, 0.1);
    /* POLISHING : Éviter le scroll sur mobile */
    max-height: 90vh;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

/* 10. TRANSITIONS FLUIDES */
* {
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Désactiver les transitions sur les propriétés qui n'en ont pas besoin */
img, canvas, video {
    transition: none;
}
